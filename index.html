<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
    <meta name="theme-color" content="#FFF" />
    <link
      rel="preload"
      href="https://res.cloudinary.com/dedvquoyt/raw/upload/v1633621647/jialiang.github.io/fonts/roboto-v29-latin-regular_nsxhnt.woff2"
      as="font"
      type="font/woff2"
      crossorigin
    />
    <link
      rel="preload"
      href="https://res.cloudinary.com/dedvquoyt/raw/upload/v1633621647/jialiang.github.io/fonts/roboto-v29-latin-500_irlqws.woff2"
      as="font"
      type="font/woff2"
      crossorigin
    />
    <link
      rel="preload"
      href="https://res.cloudinary.com/dedvquoyt/raw/upload/v1633621647/jialiang.github.io/fonts/roboto-v29-latin-700_tmzaa9.woff2"
      as="font"
      type="font/woff2"
      crossorigin
    />
    <link
      rel="preload"
      href="https://res.cloudinary.com/dedvquoyt/image/upload/f_auto,fl_immutable_cache,q_auto:best/jialiang.github.io/images-2/ahaqa71ykthag9omoeda"
      as="image"
      crossorigin
    />

    <title>Jia Liang | Software Engineer</title>
    <meta name="description" content="Personal website of software engineer, Jia Liang" />
    <meta name="author" content="Jia Liang, hojialiang@yahoo.com" />

    <link rel="icon" type="image/x-icon" href="https://jialiang.github.io/favicon.png" />
    <link rel="canonical" href="https://jialiang.github.io/" />

    <style>
      /* roboto-regular - latin */
      @font-face {
        font-family: "Roboto";
        font-weight: 400;
        font-style: normal;

        font-display: swap;
        src: url("https://res.cloudinary.com/dedvquoyt/raw/upload/v1633621647/jialiang.github.io/fonts/roboto-v29-latin-regular_nsxhnt.woff2")
            format("woff2"),
          url("https://res.cloudinary.com/dedvquoyt/raw/upload/v1633621647/jialiang.github.io/fonts/roboto-v29-latin-regular_poclwz.woff")
            format("woff");
      }

      /* roboto-500 - latin */
      @font-face {
        font-family: "Roboto";
        font-weight: 500;
        font-style: normal;

        font-display: swap;
        src: url("https://res.cloudinary.com/dedvquoyt/raw/upload/v1633621647/jialiang.github.io/fonts/roboto-v29-latin-500_irlqws.woff2")
            format("woff2"),
          url("https://res.cloudinary.com/dedvquoyt/raw/upload/v1633621647/jialiang.github.io/fonts/roboto-v29-latin-500_neeaxt.woff")
            format("woff");
      }

      /* roboto-700 - latin */
      @font-face {
        font-family: "Roboto";
        font-weight: 700;
        font-style: normal;

        font-display: swap;
        src: url("https://res.cloudinary.com/dedvquoyt/raw/upload/v1633621647/jialiang.github.io/fonts/roboto-v29-latin-700_tmzaa9.woff2")
            format("woff2"),
          url("https://res.cloudinary.com/dedvquoyt/raw/upload/v1633621647/jialiang.github.io/fonts/roboto-v29-latin-700_nibwrv.woff")
            format("woff");
      }

      /* GENERAL */
      /*#region*/

      html {
        font-family: "Roboto", sans-serif;
        width: 100%;
        height: 100%;
        color: black;
        background: white;
      }

      @media (max-width: 18.75rem) {
        html {
          font-size: 5.2vw;
        }
      }

      body {
        width: 100%;
        height: 100%;
        margin: 0;
      }

      a {
        text-decoration: none;
        color: #47a6ff;
      }

      a:hover {
        text-decoration: underline;
      }

      img {
        width: 100%;
        height: 100%;

        object-fit: cover;
      }

      canvas {
        position: fixed;
        z-index: -1;
        top: 0;
        left: 0;
        box-sizing: border-box;
        width: 100%;
        height: 100vh;
        border-top: 10vh solid snow;
        border-bottom: 10vh solid snow;
        background: linear-gradient(to bottom right, #753bb0, hotpink, yellow);

        contain: strict;
      }

      .visually-hidden {
        font-size: 0;
        overflow: hidden;
        width: 0;
        height: 0;
        margin: 0;
      }

      /*#endregion*/

      /* HEADER */
      /*#region*/

      header {
        font-size: 10rem;
        line-height: 1.125;
        display: flex;
        align-items: center;
        justify-content: center;
        box-sizing: border-box;
        height: 100%;
        margin: auto;
        padding: 0 0.7rem;
        text-align: center;
      }

      header h1 {
        font-size: 1em;
        font-weight: 700;
        margin: 0;
        white-space: nowrap;
      }

      header p {
        font-size: 0.35em;
        font-weight: 500;
        margin: 0;
      }

      header .scroll {
        font-size: 1rem;
        font-weight: 500;
        position: fixed;
        bottom: 10px;
        left: 10px;
        padding: 0.15rem 0.3rem;
        opacity: 0;
        color: black;
        background: snow;
      }

      @media (max-width: 45.125rem) {
        header {
          font-size: 21.15vw;
        }
      }

      /*#endregion*/

      /* BGM */
      /*#region*/

      #bgm-audio {
        display: none;
      }

      #bgm-button {
        font-family: "Roboto", sans-serif;
        font-size: 1rem;
        font-weight: 500;
        position: absolute;
        top: 0.85rem;
        right: 0.7rem;
        padding: 0.15rem 0.3rem;
        cursor: pointer;
        color: black;
        border: 2px solid black;
        background: white;
      }

      #bgm-button:focus {
        outline: 1px solid #47a6ff;
      }

      /*#endregion*/

      /* USP */
      /*#region*/

      #usp {
        font-size: 6rem;
        font-weight: 700;
        line-height: 1.1;
        box-sizing: border-box;
        width: 80rem;
        max-width: 100%;
        margin: 0 auto 15rem auto;
        padding: 0 0.7rem;
        text-align: center;
      }

      @media (max-width: 60.75rem) {
        #usp {
          width: 55rem;
        }
      }

      @media (max-width: 33.5rem) {
        #usp {
          font-size: 17vw;
        }
      }

      #usp p {
        font-size: 2.5rem;
        font-weight: 500;
        width: 45.25rem;
        max-width: 100%;
        margin: 0 auto 7.5rem auto;
        color: #151516;
      }

      @media (max-width: 26.6875rem) {
        #usp p {
          font-size: 8.5vw;
        }
      }

      @media (max-width: 190px) {
        #usp p {
          font-size: 1.5rem;
        }
      }

      #usp a {
        color: #06c;
      }

      #usp ul {
        margin: 0;
        padding: 0;
        list-style: none;
      }

      #usp li {
        position: relative;
        margin-bottom: 3.5rem;
      }

      #usp .text {
        will-change: opacity;
      }

      #usp .intersection-point {
        position: absolute;
        top: 50%;
        width: 1px;
        height: 70vh;
        transform: translateY(-50%);
      }

      /*#endregion*/

      /* PERSONAL */
      /*#region*/

      #personal {
        position: relative;
        display: flex;
        align-items: stretch;
        box-sizing: border-box;
        width: 84rem;
        max-width: 100%;
        margin: 5rem auto 2rem auto;
        padding: 0 2rem;
        color: white;
      }

      #personal .text-container-1 {
        display: flex;
        align-items: center;
        flex-grow: 1;
        box-sizing: border-box;
        min-width: 26rem;
        max-width: 31rem;
        margin-right: 2rem;
        padding: 4rem;
        border-radius: 2.5rem;
        background: #151516;
      }

      #personal .text-container-1 h2 {
        font-size: 3.5rem;
        font-weight: 700;
        line-height: 1.1;
        margin: 0;
        color: white;
      }

      #personal .text-container-1 h2 span:first-child {
        color: #ffa9ab;
      }

      #personal .text-container-2 {
        flex-grow: 1;
        flex-shrink: 0;
        box-sizing: border-box;
        width: 40rem;
        max-width: 100%;
        padding: 6rem 4rem;
        border-radius: 2.5rem;
        background: #12213a;
      }

      #personal ul {
        font-size: 3rem;
        margin: 0;
        padding: 0;
        list-style: none;
      }

      #personal li {
        margin: 0 0 3.2rem 0;
      }

      #personal li:last-child {
        margin-bottom: 0;
      }

      #personal .link-container {
        font-weight: 700;
        display: inline-block;
        padding: 0.1rem 0.3rem;
        border-bottom: 3px solid transparent;
        background: linear-gradient(to right, #00ffe7, #00cfff);
        -webkit-background-clip: text;
        background-clip: text;

        -webkit-text-fill-color: transparent;
      }

      .no-background-clip #personal .link-container {
        background: transparent;
      }

      #personal .link-container:hover {
        -webkit-text-fill-color: #47a6ff;
      }

      #personal .link-container:focus {
        outline: 1px solid #47a6ff;
      }

      #personal .link-subtext {
        font-size: 0.6em;
        line-height: 1.5;
        padding: 0 0.3rem;
      }

      @media (max-width: 84rem) {
        #personal {
          margin-bottom: 0;
        }

        #personal {
          padding: 0;
        }

        #personal .text-container-1 {
          margin-right: 0;
          border-radius: 0;
        }

        #personal .text-container-2 {
          border-radius: 0;
        }
      }

      @media (max-width: 68rem) {
        #personal .text-container-1 {
          min-width: 22rem;
          max-width: 27rem;
          padding-right: 3rem;
          padding-left: 3rem;
        }

        #personal .text-container-1 h2 {
          font-size: 3.25rem;
        }

        #personal .text-container-2 {
          width: 35rem;
          padding-right: 3rem;
          padding-left: 3rem;
        }

        #personal .text-container-2 li {
          font-size: 2.75rem;
        }
      }

      @media (max-width: 58rem) {
        #personal .text-container-1 {
          min-width: 21rem;
          max-width: 26rem;
        }

        #personal .text-container-1 h2 {
          font-size: 3rem;
        }

        #personal .text-container-2 {
          width: 33rem;
        }

        #personal .text-container-2 li {
          font-size: 2.5rem;
        }
      }

      @media (max-width: 55rem) {
        #personal {
          flex-direction: column;
        }

        #personal .text-container-1 {
          max-width: 100%;
          padding: 3.5rem 0.7rem 0 0.7rem;
          background: #12213a;
        }

        #personal .text-container-1 h2 {
          font-size: 2.5rem;
          font-weight: 400;
          color: #b6ff9b;
        }

        #personal .text-container-1 h2 span:first-child {
          font-size: 1.84em;
          font-weight: bold;
          line-height: 0.85;
          display: block;
          margin-bottom: 0.15em;
          color: white;
        }

        #personal .text-container-2 {
          width: 100%;
          padding: 5rem 0.7rem 7.5rem 0.7rem;
        }
      }

      /*#endregion*/

      /* PROJECTS */
      /*#region*/

      #projects {
        box-sizing: border-box;
        width: 100%;
        max-width: 80rem;
        margin: 0 auto 10rem auto;
        padding: 5rem 0;
        border-bottom: 1px solid rgba(255, 200, 250, 0.2);
        border-left: 1px solid rgba(255, 200, 250, 0.2);
        border-radius: 2.5rem;
        background: #3e1921;
      }

      #projects h2 {
        font-size: 2.5rem;
        font-weight: 400;
        line-height: 1.1;
        box-sizing: border-box;
        width: 72rem;
        max-width: 100%;
        margin: 0 auto 4.5rem auto;
        padding: 0 1rem;
        color: white;
      }

      #projects h2 span {
        display: block;
      }

      #projects h2 span:first-child {
        font-size: 1.84em;
        font-weight: 700;
      }

      #projects ul {
        display: flex;
        overflow-y: auto;
        box-sizing: border-box;
        width: 74rem;
        max-width: 100%;
        margin: 0 auto;
        padding: 1.4rem 1.4rem;
        list-style: none;
        transform: translate3d(0, 0, 0);

        scrollbar-width: none;
      }

      #projects ul::-webkit-scrollbar {
        display: none;
      }

      #projects ul:focus {
        outline: 1px solid #47a6ff;
      }

      #projects li {
        display: inline-block;
        flex-shrink: 0;
        margin-right: 2rem;
        cursor: pointer;
        transition: 0.25s transform;
        transform: perspective(250px) rotateY(5deg);
      }

      @media (prefers-reduced-motion: reduce) {
        #projects li {
          transform: none;
        }
      }

      #projects li:last-child {
        margin-right: 0;
      }

      #projects li:hover {
        transform: perspective(250px) rotateY(0deg);
        border-bottom-color: #47a6ff;
      }

      #projects a {
        display: block;
        width: 16rem;
        height: 23rem;
        padding: 0.3rem;
        border-radius: 0.75rem;
      }

      #projects a:hover {
        text-decoration: none;
      }

      #projects a:focus {
        outline: 2px solid #47a6ff;
      }

      #projects .image-container {
        overflow: hidden;
        width: 16rem;
        height: 16rem;
        border-top-left-radius: 0.75rem;
        border-top-right-radius: 0.75rem;
      }

      #projects .text-container {
        font-size: 1.35rem;
        font-weight: 500;
        line-height: 1.1;
        position: relative;
        display: flex;
        overflow: hidden;
        align-items: center;
        justify-content: center;
        box-sizing: border-box;
        width: 16rem;
        height: 7rem;
        padding: 0.25rem;
        text-align: center;
        color: white;
        border-bottom-right-radius: 0.75rem;
        border-bottom-left-radius: 0.75rem;
      }

      #projects .text-container::after {
        position: absolute;
        top: 0;
        left: 0;
        box-sizing: border-box;
        width: 100%;
        height: 100%;
        content: "";
        pointer-events: none;
        background: linear-gradient(
          to right,
          rgba(0, 0, 0, 0.15),
          transparent,
          transparent,
          rgba(0, 0, 0, 0.35)
        );
      }

      #projects .text-container div {
        overflow: hidden;
        padding: 0.75rem 0.5rem;
      }

      #projects a:hover .text-container::after {
        border-bottom: 6px solid #47a6ff;
      }

      #projects .carousel-button-container {
        display: none;
        justify-content: space-between;
        width: 135rem;
        max-width: 90%;
        margin: 2.5rem auto 0 auto;
      }

      #projects .carousel-button-container button {
        width: 4rem;
        height: 4rem;
        padding: 0;
        cursor: pointer;
        color: white;
        border: none;
        border-radius: 100%;
        background: none;
      }

      #projects .carousel-button-container button:focus {
        outline: 2px solid #47a6ff;
      }

      #projects .carousel-button-container svg {
        width: 100%;
        height: 100%;
      }

      @media (max-width: 84rem) {
        #projects {
          max-width: 100%;
          margin-bottom: 0;
          border-bottom: none;
          border-left: none;
          border-radius: 0;
        }
      }

      @media (max-width: 76rem) {
        #projects li:last-child {
          margin-right: 2rem;
        }

        #projects .carousel-button-container {
          display: flex;
        }
      }

      /*#endregion*/

      /* HOW ITS MADE */
      /*#region*/

      #how-its-made {
        position: relative;
        padding: 5rem 0 15rem 0;
        background: #151516;
      }

      #how-its-made .inverse-radius-container {
        position: absolute;
        top: -2.5rem;
        width: 100%;
        height: 2.5rem;
      }

      #how-its-made .inverse-radius-left {
        position: absolute;
        top: 0;
        left: 0;
        width: 2.5rem;
        height: 2.5rem;
        background: radial-gradient(circle, transparent 2.5rem, #151516 2.55rem) 5rem -2.5rem/5rem 5rem;
      }

      #how-its-made .inverse-radius-right {
        position: absolute;
        top: 0;
        right: 0;
        width: 2.5rem;
        height: 2.5rem;
        background: radial-gradient(circle, transparent 2.5rem, #151516 2.55rem) 2.5rem -2.5rem/5rem
          5rem;
      }

      @media (max-width: 84rem) {
        #how-its-made .inverse-radius-container {
          display: none;
        }
      }

      #how-its-made .observation-point {
        position: sticky;
        top: 0;
        width: 1px;
        height: 80vh;
      }

      #how-its-made .article {
        box-sizing: border-box;
        width: 40rem;
        max-width: 100%;
        margin: -80vh auto 0 auto;
        padding: 0 1rem;
      }

      #how-its-made h2 {
        font-size: 2.5rem;
        font-weight: 400;
        margin: 0 0 4.5rem 0;
        color: white;
      }

      #how-its-made h2 span {
        display: block;
      }

      #how-its-made h2 span:first-child {
        font-size: 1.84em;
        font-weight: 700;
      }

      #how-its-made h3 {
        font-size: 2rem;
        font-weight: 700;
        margin: 2em 0 1em 0;
        color: white;
      }

      #how-its-made h4 {
        font-size: 1.35rem;
        font-weight: 700;
        margin: 2.5em 0 0 0;
        color: white;
      }

      #how-its-made p,
      #how-its-made ul,
      #how-its-made blockquote {
        font-size: 1.25rem;
        line-height: 1.44;
        color: #dbdbdb;
      }

      #how-its-made blockquote {
        margin-right: 0;
        margin-left: 0;
        padding: 1.25rem;
        border-left: 2px solid white;
        background: #202021;
      }

      #how-its-made ol {
        margin: 0;
      }

      #how-its-made figure {
        position: relative;
        width: 100%;
        margin: 0 0 2rem 0;
        padding-top: 53.33%;
        color: #aaa;
      }

      #how-its-made figure img {
        position: absolute;
        top: 0;
        height: auto;
        border: 1px solid white;

        aspect-ratio: 1.875;
        object-fit: contain;
      }

      #how-its-made figcaption {
        margin-top: 0.75rem;
      }

      /*#endregion*/
    </style>

    <noscript>
      <style>
        #bgm-button {
          display: none !important;
        }

        #projects ul {
          scrollbar-width: initial !important;
        }

        #projects ul::-webkit-scrollbar {
          display: initial !important;
        }

        #projects .carousel-button-container {
          display: none !important;
        }
      </style>
    </noscript>
  </head>
  <body>
    <button id="bgm-button">Play Music</button>

    <canvas aria-hidden="true"></canvas>

    <header>
      <div class="text-container">
        <h1>Jia Liang.</h1>
        <p>Software engineer.</p>
      </div>
      <div class="scroll">Scroll down.</div>
    </header>

    <section id="usp">
      <h2 class="visually-hidden">About Me</h2>

      <p>
        The software engineer for when you really need websites that are really fast, beautiful,
        modern, accessible and easy-to-maintain.
        <br />
        Always open to new full-time opportunities.
      </p>
      <ul>
        <li>
          <div class="text">3+ Years Experience.</div>
          <div class="intersection-point"></div>
        </li>
        <li>
          <div class="text">Full-Stack JavaScript.</div>
          <div class="intersection-point"></div>
        </li>
        <li>
          <div class="text">Exceptional Frontend.</div>
          <div class="intersection-point"></div>
        </li>
        <li>
          <div class="text">Information Systems Graduate.</div>
          <div class="intersection-point"></div>
        </li>
      </ul>
    </section>

    <section id="personal">
      <div class="text-container-1">
        <h2><span>Reach out.</span> <span>Together, we'll reach for the sky.</span></h2>
      </div>

      <div class="text-container-2">
        <ul>
          <li>
            <a class="link-container" href="mailto:hojialiang@yahoo.com"
              >hojialiang@<wbr />yahoo.com</a
            >
            <div class="link-subtext">Let's get in touch.</div>
          </li>

          <li>
            <a class="link-container" href="resume.pdf" target="_blank">View my Resume.</a>
            <div class="link-subtext">Learn more about me.</div>
          </li>

          <li>
            <a
              class="link-container"
              href="https://github.com/jialiang"
              target="_blank"
              rel="noreferrer noopener"
              >Visit my GitHub.</a
            >
            <div class="link-subtext">See what I'm currently up to.</div>
          </li>
        </ul>
      </div>
    </section>

    <section id="projects">
      <h2>
        <span>Explore.</span>
        <span style="color: #ffb44c">My personal projects.</span>
      </h2>
      <ul id="project-carousel">
        <li>
          <a
            href="https://jialiang.github.io/3D-Engine-For-Miku/"
            target="_blank"
            rel="noreferrer noopener"
            aria-label="3D Engine For Miku project"
          >
            <div class="image-container">
              <picture>
                <source
                  srcset="
                    https://res.cloudinary.com/dedvquoyt/image/upload/f_avif,fl_immutable_cache,q_auto:best/jialiang.github.io/images-2/guyzjeueuevoysvobrjr.avif
                  "
                  type="image/avif"
                />
                <img
                  src="https://res.cloudinary.com/dedvquoyt/image/upload/f_auto,fl_immutable_cache,q_auto:best/jialiang.github.io/images-2/guyzjeueuevoysvobrjr"
                  alt="3D Engine For Miku project cover image"
                />
              </picture>
            </div>
            <div class="text-container" style="background: #005c5c">
              <div>3D Engine For Miku</div>
            </div>
          </a>
        </li>
        <li>
          <a
            href="https://jialiang.github.io/space-gems/"
            target="_blank"
            rel="noreferrer noopener"
            aria-label="Space Gems project"
          >
            <div class="image-container">
              <picture>
                <source
                  srcset="
                    https://res.cloudinary.com/dedvquoyt/image/upload/f_avif,fl_immutable_cache,q_auto:best/jialiang.github.io/images-2/vqpduedeerdckoyqhjln.avif
                  "
                  type="image/avif"
                />
                <img
                  src="https://res.cloudinary.com/dedvquoyt/image/upload/f_auto,fl_immutable_cache,q_auto:best/jialiang.github.io/images-2/vqpduedeerdckoyqhjln"
                  alt="Space Gems project cover Image"
                />
              </picture>
            </div>
            <div class="text-container" style="background: #2f4790">
              <div>Space Gems</div>
            </div>
          </a>
        </li>
        <li>
          <a
            href="https://github.com/jialiang/ShitCompressor"
            target="_blank"
            rel="noreferrer noopener"
            aria-label="Shit Compressor project"
          >
            <div class="image-container">
              <picture>
                <source
                  srcset="
                    https://res.cloudinary.com/dedvquoyt/image/upload/f_avif,fl_immutable_cache,q_auto:best/jialiang.github.io/images-2/zvjg0w8rfysg80a6tial.avif
                  "
                  type="image/avif"
                />
                <img
                  src="https://res.cloudinary.com/dedvquoyt/image/upload/f_auto,fl_immutable_cache,q_auto:best/jialiang.github.io/images-2/zvjg0w8rfysg80a6tial"
                  alt="Shit Compressor project cover image"
                />
              </picture>
            </div>
            <div class="text-container" style="background: #99350a">
              <div>Shit Compressor</div>
            </div>
          </a>
        </li>
        <li>
          <a
            href="https://jialiang.github.io/ygo-ocg-secret-rare/"
            target="_blank"
            rel="noreferrer noopener"
            aria-label="Yu-Gi-Oh Secret Rare Effect with CSS project"
          >
            <div class="image-container">
              <picture>
                <source
                  srcset="
                    https://res.cloudinary.com/dedvquoyt/image/upload/f_avif,fl_immutable_cache,q_auto:best/jialiang.github.io/images-2/fhzlnqvhx4m5e62og6zu.avif
                  "
                  type="image/avif"
                />
                <img
                  src="https://res.cloudinary.com/dedvquoyt/image/upload/f_auto,fl_immutable_cache,q_auto:best/jialiang.github.io/images-2/fhzlnqvhx4m5e62og6zu"
                  alt="Yu-Gi-Oh Secret Rare Effect with CSS project cover image"
                />
              </picture>
            </div>
            <div class="text-container" style="background: #a9194b">
              <div>Yu-Gi-Oh Secret Rare Effect with CSS</div>
            </div>
          </a>
        </li>
      </ul>
      <div class="carousel-button-container">
        <button id="project-carousel-left-button" aria-label="scroll projects carousel left">
          <svg fill="white" viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg">
            <path
              d="m1037 1395 102-102q19-19 19-45t-19-45L832 896l307-307q19-19 19-45t-19-45l-102-102q-19-19-45-19t-45 19L493 851q-19 19-19 45t19 45l454 454q19 19 45 19t45-19zm627-499q0 209-103 385.5T1281.5 1561 896 1664t-385.5-103T231 1281.5 128 896t103-385.5T510.5 231 896 128t385.5 103T1561 510.5 1664 896z"
            ></path>
          </svg>
        </button>
        <button id="project-carousel-right-button" aria-label="scroll projects carousel right">
          <svg fill="white" viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg">
            <path
              d="m845 1395 454-454q19-19 19-45t-19-45L845 397q-19-19-45-19t-45 19L653 499q-19 19-19 45t19 45l307 307-307 307q-19 19-19 45t19 45l102 102q19 19 45 19t45-19zm819-499q0 209-103 385.5T1281.5 1561 896 1664t-385.5-103T231 1281.5 128 896t103-385.5T510.5 231 896 128t385.5 103T1561 510.5 1664 896z"
            ></path>
          </svg>
        </button>
      </div>
    </section>

    <section id="how-its-made">
      <div class="inverse-radius-container">
        <div class="inverse-radius-left"></div>
        <div class="inverse-radius-right"></div>
      </div>

      <div class="observation-point"></div>

      <div class="article">
        <h2>
          <span>How.</span>
          <span style="color: #ffa9ab">The making of this website.</span>
        </h2>

        <p>
          It's that time of the year again where I revamp my personal website. The one you're
          looking at right now is the 4th edition 1st Revision. It was revised following community
          feedback.
        </p>

        <p>
          I reckon the entire development lifecycle of this website took me 10 man-days. Most of
          that time improving accessibility and writing this document.
        </p>

        <p>
          This time around, I studied the
          <a href="https://www.apple.com/" target="_blank" rel="noopener noreferrer"
            >Apple website</a
          >
          for design ideas. I've always considered Apple's marketing materials to be well done even
          if I don't always agree with their business practices.
        </p>

        <h3>Hosting</h3>

        <p>
          HTML and media files are hosted on
          <a href="https://pages.github.com/" target="_blank" rel="noopener noreferrer"
            >GitHub Pages</a
          >. Most of my repositories are already hosted on GitHub so I'm mostly using them out of
          convenience. They use Fastly as their CDN.
        </p>
        <p>
          However, I use
          <a href="https://cloudinary.com/" target="_blank" rel="noopener noreferrer">Cloudinary</a>
          to host static assets like images, font files and JavaScript files. Cloudinary uses a
          multi-CDN approach with 3 CDNs: Akamai, Cloudfront and Fastly. I discovered them when I
          was prodding through the internals of
          <a href="https://www.nike.com">Nike's website</a>.
        </p>
        <p>
          The main reason I use Cloudinary is because GitHub Pages sets a 10 minute cache-control
          header on all resources. Despite being a widely requested feature, they refuse to allow us
          to set a longer cache expiry period. By contrast, Cloudinary has a reasonable 30 days
          cache-control period. Caching allows browsers to store copies of files locally to be
          served in the future. Retrieving files from your hard drive is significantly faster than
          retrieving it from the server.
        </p>
        <p>
          Caching aside, on my home internet, Cloudinary delivers files around 60% faster than
          GitHub Pages. I tested this by first opening a new incognito browser window. Then I track
          the time it takes for them to transfer a 15kB payload. Do note that even if you enable
          "disable cache" in the developer console, browsers may still keep connections alive and
          cache DNS lookups. Therefore a new incognito window is necessary for a truly clean slate.
          I repeat this multiple times and average the results.
        </p>
        <p>
          It's not only me. According to CDNPerf, in Asia where I'm based:
          <a
            href="https://www.cdnperf.com/cdn-compare?type=performance&location=continents&cdn=akamai-cdn,aws-cloudfront-cdn,cloudflare-cdn,fastly-cdn&locationValue=Asia"
            target="_blank"
            rel="noopener noreferrer"
            >Fastly is consistently slower than its competitors</a
          >.
        </p>
        <p>
          I am aware using a separate host for static assets does have its drawbacks. For one, the
          browser needs to perform an additional DNS lookup, initial connection and SSL handshake
          after parsing the HTML. However, even with all this overhead, Cloudinary still manages to
          match or beat GitHub Pages' time. It should be said that Cloudinary cannot be used to host
          websites. They will serve HTML files as attachments rather than webpages.
        </p>
        <p>
          Audio files are still served through GitHub Pages because latency is less of an issue for
          large media content. Cloudinary also has a strict 33GB per month free bandwidth limit.
        </p>
        <p>
          Cloudinary also lets me serve my images in different formats just by changing the URL. My
          current setup has AVIF as the preferred image format. If AVIF is not supported then
          Cloudinary will automatically choose the best supported format based on the user's
          browser.
        </p>

        <h3>Header</h3>

        <figure class="image-container">
          <picture>
            <source
              srcset="
                https://res.cloudinary.com/dedvquoyt/image/upload/f_avif,fl_immutable_cache,q_auto:best/jialiang.github.io/images-2/qb79cbb3x0jlp1fxcuhs.avif
              "
              type="image/avif"
            />
            <img
              src="https://res.cloudinary.com/dedvquoyt/image/upload/f_auto,fl_immutable_cache,q_auto:best/jialiang.github.io/images-2/qb79cbb3x0jlp1fxcuhs"
              alt="MacBook Pro 16-inch Product Page screenshot"
              loading="lazy"
            />
          </picture>
          <figcaption>MacBook Pro 16-inch Product Page screenshot.</figcaption>
        </figure>

        <p>
          I like how the header is done on the
          <a href="https://www.apple.com/macbook-pro-16/" target="_blank" rel="noopener noreferrer"
            >product page for the MacBook Pro 16-inch</a
          >. It starts with this big headline and tagline. The big bold letters stand in stark
          contrast to the simple background. Without any other elements around it, your attention is
          immediately drawn to it. From there, the headline sets the context and the tagline sets
          the tone and expectation. The boldness of the font and the use of periods creates an air
          of confidence.
        </p>

        <p>
          Apple also includes a product image near the header text to illustrate the product sold. I
          considered putting a picture of myself, but I wasn't able to produce any that were good
          enough. I figure generative art can be a good alternative. It provides visual interest but
          more importantly sends a message of technical competence.
        </p>

        <h3>Background</h3>

        <p>
          Originally, the background featured a star field animation as inspired by
          <a
            aria-label="Goodbye Moonmen remix by The Living Tombstone"
            href="https://www.youtube.com/watch?v=vdEWZq-m27M"
            target="_blank"
            rel="noopener noreferrer"
            >The Living Tombstone's Goodbye Moonmen remix</a
          >. But it was changed because of feedback that it was too distracting.
        </p>

        <p>
          The current background is inspired by the
          <a
            href="https://www.youtube.com/watch?v=kg1BljLu9YY"
            target="_blank"
            rel="noopener noreferrer"
            >music video of Thunderclouds by LSD</a
          >. This song was famously known for being the music that played during the commercial for
          the Samsung Galaxy Note 9.
        </p>

        <p>
          I scoured the internet for implementation ideas before stumbling on
          <a
            href="https://experiments.withgoogle.com/clouds"
            target="_blank"
            rel="noopener noreferrer"
            >Clouds by Mr. Doob</a
          >. If you're not aware, Mr. Doob is the creator of THREE.js. It works by peppering images
          of clouds throughout the scene. The same cloud image is used but its position, scale,
          rotation and opacity are randomised to create variation. This approach produces some
          pretty fast and good looking clouds.
        </p>
        <p>
          As you can see, these are not real physically accurate volumetric clouds. Unfortunately,
          those require raymarching and scattering which are all very complex and GPU intensive
          processes.
        </p>
        <p>
          Mr. Doob's demo uses THREE.js and I kept it that way. Rewriting it would involve a lot of
          effort for very little gain. I understand that THREE.js is a big library at 590kB minified
          (120kB gzipped). Mind you, besides the cost of downloading the file, the browser still
          needs to parse all that JavaScript code. Thus, I decided to make an effort to remove
          unused code.
        </p>

        <p>
          Unfortunately, THREE.js isn't an easy library to tree-shake. This is best illustrated by
          trying to build the THREE.js library yourself. THREE.js uses Rollup as its build tool
          which has tree-shaking capabilities built-in. Even exporting just the WebGLRenderer class
          alone gives you a 353kB big distributable. There are a few factors for this:
        </p>

        <ul>
          <li>
            Eager initialization. In the WebGLRenderer class that I mentioned, its constructor
            automatically creates instances for WebXR, morph targets, cube maps, shadow maps etc
            regardless if you need it or not. The rest of the class naturally operates with the
            assumption that these attributes have been initialized. Thus these initializations are
            not so easily removed.
          </li>
          <li>
            Inability to tree-shaker class methods. Bundlers like Rollup and Webpack can only
            tree-shake classes and top-level variables through static analysis. The dynamic nature
            of JavaScript makes more granular forms of tree-shaking difficult to do safely.
          </li>
        </ul>

        <p>
          With these problems in mind, the tools I use for tree-shaking is my own modified version
          of
          <a
            href="https://github.com/pinqy520/coverage-shaker"
            target="_blank"
            rel="noopener noreferrer"
            >Coverage Shaker</a
          >
          and the
          <a
            href="https://developers.google.com/closure/compiler"
            target="_blank"
            rel="noopener noreferrer"
            >Closure Compiler</a
          >. Coupled with a little elbow grease, I managed to shrink the library down to only 60kB
          minified (20kB gzipped).
        </p>

        <p>
          For context, in the Chrome Developer Console, there's a Coverage tab. It shows you a
          line-by-line breakdown of used and unused code during runtime. This report can be exported
          as a JSON file. Coverage Shaker removes unused code blocks based on the exported report.
          This approach is tree-shaking through dynamic analysis.
        </p>

        <p>
          After this, I looked through the output and further removed big chunks of code through
          manual intervention. Finally, the Closure Compiler is used to minify the file while
          preserving externally referenced symbols.
        </p>

        <p>
          Performance-wise, one of the more complex optimizations I made is using
          <a
            href="https://developer.mozilla.org/en-US/docs/Web/API/OffscreenCanvas"
            target="_blank"
            rel="noopener noreferrer"
            >OffscreenCanvas</a
          >
          and
          <a
            href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API"
            target="_blank"
            rel="noopener noreferrer"
            >Web Workers</a
          >. WebGL animation can be very CPU intensive especially during initialization. If done on
          the main thread, it can block the execution of other tasks. This makes the user interface
          unresponsive. In order to make it non-blocking, a Web Worker is spawned to execute code on
          a separate thread. Web Workers do not have access to the DOM, so it cannot draw to the DOM
          canvas directly. Thus OffscreenCanvas is needed as a go-between. Browsers that do not
          support either features will fall back to using the main thread. The way I measure
          improvements from this change is the time to interactive metric in
          <a
            href="https://developers.google.com/web/tools/lighthouse"
            target="_blank"
            rel="noopener noreferrer"
            >Lighthouse</a
          >.
        </p>

        <p>
          I'm proud to say that even on a Xiaomi Redmi Note 4, it runs at 60 fps on both Firefox
          Mobile and Chrome for Android. For context, the Xiaomi Redmi Note 4 is a 170 USD mid-range
          phone released in early 2017.
        </p>

        <p>User experience-wise, I'm quite pleased with how the star field turned out.</p>

        <ul>
          <li>
            The constant motion makes the webpage feel alive and dynamic, yet doesn't distract from
            the content. The motion's rhythmic nature allows the brain to become habituated to it.
          </li>
          <li>It's something fresh and not something you often see on the web.</li>
          <li>It's light on bandwidth since most of it is procedurally generated by code.</li>
          <li>
            It uses a reasonable amount of GPU. For a 1080p 60Hz screen, it uses around 36% of an
            Intel UHD Graphics 630 GPU.
          </li>
        </ul>

        <h3>Intro Section</h3>

        <figure class="image-container">
          <picture>
            <source
              srcset="
                https://res.cloudinary.com/dedvquoyt/image/upload/f_avif,fl_immutable_cache,q_auto:best/jialiang.github.io/images-2/vre3hivoeyvkgb7m9teo.avif
              "
              type="image/avif"
            />
            <img
              src="https://res.cloudinary.com/dedvquoyt/image/upload/f_auto,fl_immutable_cache,q_auto:best/jialiang.github.io/images-2/vre3hivoeyvkgb7m9teo"
              alt="iPhone 13 Pro product page screenshot"
              loading="lazy"
            />
          </picture>
          <figcaption>iPhone 13 Pro product page screenshot.</figcaption>
        </figure>

        <p>
          In the intro section right after the header, I decided to list down my value propositions.
          My method was inspired by the
          <a
            href="https://www.apple.com/my/iphone-13-pro/"
            target="_blank"
            rel="noopener noreferrer"
            >iPhone 13 Pro product page</a
          >. Most people don't like reading so I made my messages as short as possible. I made them
          big and bold so that they're hard to miss. The fade-on-scroll effect makes it interactive.
          This way users are more likely to slow down, play with it and read everything.
        </p>

        <h3>Personal Section</h3>

        <figure class="image-container">
          <picture>
            <source
              srcset="
                https://res.cloudinary.com/dedvquoyt/image/upload/f_avif,fl_immutable_cache,q_auto:best/jialiang.github.io/images-2/eogu5worgn6fk0wkgkdx.avif
              "
              type="image/avif"
            />
            <img
              src="https://res.cloudinary.com/dedvquoyt/image/upload/f_auto,fl_immutable_cache,q_auto:best/jialiang.github.io/images-2/eogu5worgn6fk0wkgkdx"
              alt="MacBook Pro 13 inch product page screenshot"
              loading="lazy"
            />
          </picture>
          <figcaption>MacBook Pro 13 inch product page screenshot.</figcaption>
        </figure>

        <p>
          For the next section, I decided to follow the card based approach that dominates the
          <a href="https://www.apple.com/macbook-pro-13/" target="_blank" rel="noopener noreferrer"
            >MacBook Pro 13 inch product page</a
          >. I think that this is a great way to introduce more colors to break up the monotony. It
          also helps to group elements together.
        </p>

        <p>
          On mobile, they are simplified to just have different colored backgrounds instead. Since
          cards layout tend to be less space efficient.
        </p>

        <h3>Projects Section</h3>

        <figure class="image-container">
          <picture>
            <source
              srcset="
                https://res.cloudinary.com/dedvquoyt/image/upload/f_avif,fl_immutable_cache,q_auto:best/jialiang.github.io/images-2/grqwjah3tyshruu0kkgk.avif
              "
              type="image/avif"
            />
            <img
              src="https://res.cloudinary.com/dedvquoyt/image/upload/f_auto,fl_immutable_cache,q_auto:best/jialiang.github.io/images-2/grqwjah3tyshruu0kkgk"
              alt="Apple Music homepage screenshot"
              loading="lazy"
            />
          </picture>
          <figcaption>Apple Music homepage screenshot.</figcaption>
        </figure>

        <p>
          I envisioned my personal projects shown the same way apps show a list of song cover art.
          So I looked at Apple Music's user interface for inspiration. I did find the card-based
          approach to be reasonable. I also liked how the background uses the dominant color of the
          cover art to group text and image visually.
        </p>

        <p>
          I did the same, but while the results weren't bad, it does feel a tad generic. Then I
          thought of how vinyl and CDs are arranged on shelves and tried rotating the cards
          horizontally a bit. Boy, did that make a huge difference. Things suddenly looked way more
          interesting. I'm not entirely sure why this is the case but I read that it's due to visual
          tension. Basically, we filter out the routine and mundane. But when things look off, we
          pay attention to it.
        </p>

        <p>
          The cards all need to be in a single row. They shouldn't wrap so as not to interrupt the
          compositional flow. Thus, horizontal overflow would occur on smaller screens. Most mouse
          users don't really have a way to scroll horizontally. They would need to depend on
          on-screen arrows, which can be tedious to use. But I decided it wasn't a big problem. I
          only have 4 projects at the time of writing. Mouse users tend to have larger screens. All
          the projects should fit with little to no scrolling required from them.
        </p>

        <p>
          For a while, I considered adding scroll snapping. Think of it like auto-correct for
          scrolling. It was easy to implement too now that CSS natively supports it. But I looked at
          what people said on the internet and most aren't big fans. They claim it's invasive, takes
          control away from the user and goes against user expectations. I looked at the
          <a href="https://www.apple.com/store" target="_blank" rel="noopener noreferrer"
            >Apple Store page</a
          >
          and the
          <a
            href="https://developers.google.com/search/docs/advanced/structured-data/carousel"
            target="_blank"
            rel="noopener noreferrer"
            >Google Search Carousel</a
          >
          and they don't have scroll snapping either. Thus, I decided to scrap this idea.
        </p>

        <h3>Article Section</h3>

        <p>
          For the article section I made the background black so you can focus better on the text.
          The background animation is also turned off completely since it won't be visible anymore.
          I used the
          <a
            href="https://developer.mozilla.org/en-US/docs/Web/API/Intersection_Observer_API"
            target="_blank"
            rel="noopener noreferrer"
            >Intersection Observer API</a
          >
          to know which section the user is currently on. The body text is also made off-white to
          reduce eye-strain.
        </p>

        <p>
          I typed this article on
          <a href="https://docs.google.com" target="_blank" rel="noopener noreferrer"
            >Google Docs</a
          >
          and used its spell checker and grammar checker. I also use the
          <a href="https://hemingwayapp.com/" target="_blank" rel="noopener noreferrer"
            >Hemingway App</a
          >
          to ensure good writing style and readability. It uses the Automated Readability Index
          (ARI) to gauge my readability level. It gave my article a Grade 7, which means it's around
          the level of Harry Potter in terms of readability.
        </p>

        <h3>Accessibility</h3>

        <p>
          On accessibility, I refer to the
          <a href="https://www.w3.org/TR/WCAG21/" target="_blank" rel="noopener noreferrer"
            >Web Content Accessibility Guidelines (WCAG) 2.1 standard</a
          >. Here I'll discuss some of the Level AAA success criteria relevant to my website.
        </p>

        <h4>Success Criterion 1.4.6: Contrast (Enhanced)</h4>

        <p>
          Probably the most famous criterion. A website must have a sufficient color contrast ratio
          for all texts: 7:1 for normal texts and 4.5:1 for large texts.
        </p>

        <h4>Success Criterion 1.4.8: Visual Presentation</h4>

        <p>This success criterion has 5 requirements:</p>

        <blockquote>
          <ol>
            <li>Foreground and background colors can be selected by the user.</li>
          </ol>
        </blockquote>

        <p>
          At first glance, the first criteria seems to significantly restrict your creative freedom,
          but I later found out that that was not the case.
        </p>

        <p>
          For context, browsers that meet
          <a
            href="https://www.w3.org/TR/UAAG10/guidelines.html#tech-configure-text-color"
            target="_blank"
            rel="noopener noreferrer"
            >User Agent Accessibility Guidelines 1.0 (UAAG 1.0) Checkpoint 4.3</a
          >
          allow users to configure the background and foreground colors. They can also be set to
          override the webpage's stylesheet.
        </p>

        <p>
          One way to satisfy this requirement is using
          <a
            href="https://www.w3.org/WAI/WCAG21/Techniques/general/G156.html"
            target="_blank"
            rel="noopener noreferrer"
            >Technique G156: Using a technology that has commonly-available user agents that can
            change the foreground and background of blocks of text</a
          >. Basically, it asks that you don't unnecessarily prevent your stylesheets from being
          overridden. For context, there are CSS properties like
          <a
            href="https://developer.mozilla.org/en-US/docs/Web/CSS/forced-color-adjust"
            target="_blank"
            rel="noopener noreferrer"
            >forced-color-adjust and -ms-high-contrast-adjust</a
          >. They allow elements to opt-out from being overridden if their original colors serve a
          functional purpose.
        </p>

        <br />

        <blockquote>
          <ol start="2">
            <li>Width is no more than 80 characters or glyphs (40 if CJK).</li>
            <li>Text is not justified (aligned to both the left and the right margins).</li>
            <li>
              Line spacing (leading) is at least space-and-a-half within paragraphs, and paragraph
              spacing is at least 1.5 times larger than the line spacing.
            </li>
          </ol>
        </blockquote>

        <p>The next 3 requirements are quite straightforward:</p>

        <ul>
          <li>The width of my text blocks are around 70 characters.</li>
          <li>None of my texts are justified.</li>
          <li>My paragraph spacing is 2.27 times larger than my line spacing.</li>
        </ul>
        <br />

        <blockquote>
          <ol start="5">
            <li>
              Text can be resized without assistive technology up to 200 percent in a way that does
              not require the user to scroll horizontally to read a line of text on a full-screen
              window.
            </li>
          </ol>
        </blockquote>

        <p>
          The fifth requirement was a bit confusing. After all, given a small enough screen size,
          all websites eventually fail to allow doubling of text size without breaking. I did find
          out that this requirement is related to
          <a
            href="https://www.w3.org/WAI/WCAG21/Understanding/reflow.html"
            target="_blank"
            rel="noopener noreferrer"
            >Success Criterion 1.4.10: Reflow</a
          >. Combining both criteria, I concluded that given a viewport of 12801024 CSS pixels,
          users must be able to zoom up to 400%. During which, 200% text enlargement must be
          possible.
        </p>

        <h4>Success Criterion 2.1.3: Keyboard (No Exception)</h4>

        <p>
          To satisfy this criteria, I tried navigating my website using only a keyboard. I also made
          sure that the currently focused element is always visible and clearly distinguishable.
          Focused elements on this website always have a blue outline.
        </p>

        <h4>Success Criterion 2.3.3: Animation from Interactions</h4>

        <p>
          Animations can cause dizziness or nausea in people with vestibular disorders. I use the
          "prefers-reduced-motion" CSS Media Query to understand the user's motion preference. All
          animations are disabled if the user prefers reduced motion.
        </p>

        <h4>Success Criterion 2.4.9: Link Purpose (Link Only)</h4>

        <p>
          Some vision-impaired users use their screen reader's "list of links" function for quick
          navigation. I used the NVDA screen reader to make sure that the list of links for my
          website makes sense even without context.
        </p>

        <h4>Success Criterion 2.4.10: Section Headings</h4>

        <p>
          Section headings allow for easy navigation and better reading comprehension. I went into
          the Accessibility tab in the Firefox Developer Tools and checked that the outline of the
          document makes sense.
        </p>

        <h4>Success Criterion 3.1.5: Reading Level</h4>

        <p>
          This is to accommodate people with lower secondary education level reading ability. I used
          the Hemingway App to determine the readability level of my texts and adjust accordingly.
        </p>

        <h3>Compatibility</h3>

        <p>
          This website should work with the latest version of all major browsers. At the time of
          writing these are:
        </p>

        <ul>
          <li>Mozilla Firefox 92</li>
          <li>Google Chrome 94</li>
          <li>Microsoft Edge 94</li>
          <li>Apple Safari 15</li>
        </ul>

        <p>
          On Internet Explorer 11 and on browsers with JavaScript disabled, graceful degradation
          occurs. All text and links would still show up and work but some features may be
          unavailable.
        </p>

        <p>
          I've tested this webpage on a wide range of simulated screen sizes. The 2 main ways I test
          for screen size compatibility are as follows:
        </p>

        <ul>
          <li>
            I start with a 240320 viewport (Nokia 8110 4G). First I stretch it horizontally until
            it has a 32:9 aspect ratio (Double Full HD). Then I start over and stretch it vertically
            until it has a 9:32 aspect ratio. This test covers extreme aspect-ratios combined with
            extremely small sides.
          </li>
          <li>
            I simulate the viewport sizes of the iPhone, iPad and a 1080p monitor. This test covers
            widely-used screen sizes.
          </li>
        </ul>

        <h3>Privacy</h3>

        <p>As always, this webpage contains absolutely no tracking whatsoever.</p>
      </div>
    </section>

    <audio id="bgm-audio">
      <source src="audios/Thunderclouds.flac" type="audio/flac" />
      <source src="audios/Thunderclouds.mp3" type="audio/mp3" />
    </audio>

    <script src="https://res.cloudinary.com/dedvquoyt/raw/upload/v1634484087/jialiang.github.io/scripts/three.module.min_qxuq31.js"></script>

    <script id="vertex-shader-source" type="x-shader/x-vertex">
      varying vec2 vUv;

      void main() {
        vUv = uv;
        gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
      }
    </script>

    <script id="fragment-shader-source" type="x-shader/x-fragment">
      uniform sampler2D map;

      uniform vec3 fogColor;
      uniform float fogNear;
      uniform float fogFar;

      varying vec2 vUv;

      void main() {
        float depth = gl_FragCoord.z / gl_FragCoord.w;
        float fogFactor = smoothstep(fogNear, fogFar, depth);

        gl_FragColor = texture2D(map, vUv);
        gl_FragColor.w *= pow(gl_FragCoord.z, 20.0);
        gl_FragColor = mix(gl_FragColor, vec4(fogColor, gl_FragColor.w), fogFactor);
      }
    </script>

    <script id="webgl-code">
      if (self.importScripts) {
        self.importScripts(
          "https://res.cloudinary.com/dedvquoyt/raw/upload/v1634484087/jialiang.github.io/scripts/three.module.min_qxuq31.js"
        );
      }

      let renderer;
      let camera;
      let scene;
      let startTime;
      let performanceCaveat = false;

      function initWebGL(canvas, vertexShaderSource, fragmentShaderSource) {
        const THREE = initThreeJS();

        try {
          renderer = new THREE.WebGLRenderer({
            canvas: canvas,
            antialias: false,
            alpha: true,
            failIfMajorPerformanceCaveat: true,
            stencil: false,
            depth: false,
          });
        } catch (e) {
          renderer = new THREE.WebGLRenderer({
            canvas: canvas,
            antialias: false,
            alpha: true,
            stencil: false,
            depth: false,
          });

          performanceCaveat = true;
        }

        renderer.setSize(canvas.width, canvas.height, false);

        camera = new THREE.PerspectiveCamera(30, canvas.width / canvas.height, 1, 3000);
        camera.position.y = 0;
        camera.position.z = 100;

        return new Promise(function (resolve) {
          new THREE.ImageBitmapLoader().load(
            "https://res.cloudinary.com/dedvquoyt/image/upload/f_auto,fl_immutable_cache,q_auto:best/jialiang.github.io/images-2/ahaqa71ykthag9omoeda",
            function (imageBitmap) {
              const texture = new THREE.CanvasTexture(imageBitmap);

              texture.magFilter = THREE.LinearFilter;
              texture.minFilter = THREE.LinearMipMapLinearFilter;

              const fog = new THREE.Fog(0x4584b4, -100, 3000);

              const material = new THREE.ShaderMaterial({
                uniforms: {
                  map: { type: "t", value: texture },
                  fogColor: { type: "c", value: fog.color },
                  fogNear: { type: "f", value: fog.near },
                  fogFar: { type: "f", value: fog.far },
                },
                vertexShader: vertexShaderSource,
                fragmentShader: fragmentShaderSource,
                depthWrite: false,
                depthTest: false,
                transparent: true,
              });

              const plane = new THREE.Mesh(new THREE.PlaneGeometry(64, 64));
              const geometry = new THREE.Geometry();

              const randomNumbers = [
                0.764, 0.36, 0.001, 0.979, 0.158, 0.209, 0.42, 0.122, 0.577, 0.777, 0.204, 0.046,
                0.562, 0.755, 0.339, 0.785, 0.84, 0.324, 0.581, 0.338, 0.436, 0.166, 0.112, 0.383,
                0.644, 0.954, 0.022, 0.92, 0.215, 0.055, 0.168, 0.619, 0.616, 0.863, 0.909, 0.98,
                0.914, 0.708, 0.024, 0.334, 0.319, 0.771, 0.771, 0.851, 0.06, 0.267, 0.892, 0.345,
                0.364, 0.137, 0.115, 0.194, 0.432, 0.936, 0.955, 0.873, 0.999, 0.752, 0.717, 0.063,
                0.719, 0.121, 0.956, 0.847, 0.601, 0.046, 0.471, 0.229, 0.628, 0.844, 0.204, 0.895,
                0.88, 0.602, 0.615, 0.269, 0.264, 0.712, 0.854, 0.417, 0.625, 0.688, 0.626, 0.986,
                0.514, 0.241, 0.14, 0.365, 0.357, 0.671, 0.099, 0.704, 0.657, 0.596, 0.433, 0.631,
                0.463, 0.17, 0.724, 0.93, 0.638, 0.949, 0.787, 0.237, 0.701, 0.462, 0.753, 0.44,
                0.533, 0.344, 0.189, 0.414, 0.493, 0.917, 0.074, 0.593, 0.024, 0.305, 0.756, 0.469,
                0.384, 0.141, 0.826, 0.033, 0.019, 0.923, 0.225, 0.651, 0.514, 0.362, 0.315, 0.402,
                0.385, 0.655, 0.96, 0.203, 0.573, 0.438, 0.613, 0.488, 0.535, 0.436, 0.459, 0.212,
                0.608, 0.164, 0.373, 0.284, 0.981, 0.112, 0.698, 0.814, 0.151, 0.35, 0.356, 0.507,
                0.284, 0.882, 0.074, 0.311, 0.607, 0.08, 0.433, 0.607, 0.501, 0.254, 0.193, 0.795,
                0.9, 0.467, 0.868, 0.617, 0.437, 0.697, 0.989, 0.507, 0.529, 0.36, 0.024, 0.695,
                0.506, 0.642, 0.994, 0.418, 0.632, 0.03, 0.082, 0.445, 0.266, 0.766, 0.828, 0.353,
                0.084, 0.961, 0.233, 0.314, 0.374, 0.411, 0.501, 0.236, 0.696, 0.527, 0.368, 0.464,
                0.028, 0.244, 0.06, 0.597, 0.667, 0.269, 0.792, 0.263, 0.159, 0.434, 0.255, 0.354,
                0.298, 0.978, 0.685, 0.351, 0.448, 0.147, 0.608, 0.974, 0.716, 0.768, 0.449, 0.892,
                0.252, 0.087, 0.368, 0.91, 0.466, 0.914, 0.561, 0.413, 0.905, 0.931, 0.424, 0.401,
                0.408, 0.167, 0.667, 0.075, 0.14, 0.179, 0.83, 0.18, 0.957, 0.196, 0.151, 0.456,
                0.717, 0.143, 0.042, 0.538, 0.271, 0.482, 0.109, 0.637, 0.642, 0.474, 0.535, 0.709,
                0.231, 0.453, 0.82, 0.783, 0.509, 0.256, 0.658, 0.268, 0.955, 0.997, 0.54, 0.293,
                0.019, 0.039, 0.308, 0.078, 0.81, 0.976, 0.605, 0.236, 0.405, 0.106, 0.456, 0.763,
                0.367, 0.319, 0.845, 0.347, 0.251, 0.266, 0.667, 0.646, 0.906, 0.831, 0.774, 0.828,
              ];

              for (let i = 0; i < 50; i++) {
                plane.position.x = randomNumbers.pop() * 400;
                plane.position.y = -randomNumbers.pop() * randomNumbers.pop() * 200 - 15;
                plane.position.z = i;

                plane.rotation.z = randomNumbers.pop() * Math.PI;
                plane.scale.x = plane.scale.y =
                  randomNumbers.pop() * randomNumbers.pop() * 1.5 + 0.5;

                plane.updateMatrix();
                geometry.merge(plane.geometry, plane.matrix);

                plane.position.x = plane.position.x + 400;

                plane.updateMatrix();
                geometry.merge(plane.geometry, plane.matrix);
              }

              const mesh_1 = new THREE.Mesh(geometry, material);
              const mesh_2 = new THREE.Mesh(geometry, material);

              mesh_2.position.z = -100;

              scene = new THREE.Scene();
              scene.add(mesh_1);
              scene.add(mesh_2);

              startTime = performance.now();

              if (performanceCaveat) {
                requestAnimationFrame(function () {
                  camera.position.x = 100;

                  renderer.render(scene, camera);
                });
                return;
              }

              if (typeof Window === "undefined") self.postMessage({ initWebGLSuccess: true });

              resolve(!performanceCaveat);
            }
          );
        });
      }

      function renderWebGL(currentTime) {
        if (startTime == null) return; // WebGL not finished initializing, ignore draw call

        camera.position.x = (((currentTime - startTime) * 0.0025 - 100) % 400) + 200;

        renderer.render(scene, camera);
      }

      self.onmessage = function (e) {
        if (e.data.raf) return renderWebGL(e.data.raf);

        return initWebGL(e.data.canvas, e.data.vertexShaderSource, e.data.fragmentShaderSource);
      };
    </script>

    <script>
      const prefersReducedMotion = window.matchMedia("(prefers-reduced-motion: reduce)");

      function initBgm() {
        const bgmAudio = document.getElementById("bgm-audio");
        const bgmButton = document.getElementById("bgm-button");

        const playingText = "Pause Music";
        const pausedText = "Play Music";

        bgmAudio.onended = function () {
          bgmButton.textContent = pausedText;
        };

        bgmButton.onclick = function () {
          if (bgmAudio.paused) {
            bgmAudio.play();
            bgmButton.textContent = playingText;
          } else {
            bgmAudio.pause();
            bgmButton.textContent = pausedText;
          }
        };
      }

      function initCanvas() {
        if (!prefersReducedMotion || prefersReducedMotion.matches) return;

        let pause = false; // pause by user scrolled to how-its-made section

        if (typeof IntersectionObserver !== "undefined") {
          const observer = new IntersectionObserver(
            function (entries) {
              if (entries[0].isIntersecting) pause = true;
              else pause = false;
            },
            { threshold: [1] }
          );

          observer.observe(document.querySelector("#how-its-made .observation-point"));
        }

        const canvas = document.getElementsByTagName("canvas")[0];
        const vertexShaderSource = document.getElementById("vertex-shader-source").innerHTML;
        const fragmentShaderSource = document.getElementById("fragment-shader-source").innerHTML;

        const width = window.innerWidth;
        const height = window.innerHeight * 0.8;

        if (canvas.transferControlToOffscreen) {
          // We support off-screen canvas!

          const workerCode = document.getElementById("webgl-code").innerHTML;
          const workerCodeBlob = new Blob([workerCode], { type: "text/javascript" });
          const offscreenCanvas = canvas.transferControlToOffscreen();

          offscreenCanvas.width = width;
          offscreenCanvas.height = height;

          const worker = new Worker(window.URL.createObjectURL(workerCodeBlob));

          // Start drawing when worker tells us initialization is complete
          worker.onmessage = function (e) {
            const draw = function (totalTime) {
              if (!pause) worker.postMessage({ raf: totalTime });

              requestAnimationFrame(draw);
            };

            requestAnimationFrame(draw);
          };

          // Sent message to worker to kick-start WebGL initialization
          worker.postMessage(
            {
              canvas: offscreenCanvas,
              vertexShaderSource: vertexShaderSource,
              fragmentShaderSource: fragmentShaderSource,
            },
            [offscreenCanvas]
          );
        } else {
          // We don't support offscreen canvas, use normal way

          if (window.fetch == null) return; // doesn't support fetch, probably IE11

          canvas.width = width;
          canvas.height = height;

          initWebGL(canvas, vertexShaderSource, fragmentShaderSource).then(function (ok) {
            if (!ok) return;

            const draw = function (totalTime) {
              if (!pause) renderWebGL(totalTime);

              requestAnimationFrame(draw);
            };

            requestAnimationFrame(draw);
          });
        }
      }

      function initCarouselScroll() {
        const carousel = document.getElementById("project-carousel");
        const cards = document.querySelectorAll("#project-carousel li");
        const left = document.getElementById("project-carousel-left-button");
        const right = document.getElementById("project-carousel-right-button");

        const newPosition = function (mode) {
          if (carousel.scrollWidth < window.innerWidth) return 0;

          const scrollPos = carousel.scrollLeft;
          const carouselWidth = carousel.scrollWidth;
          const halfCardWidth = (8 * carouselWidth) / 74;
          const halfWindowWidth = window.innerWidth / 2;
          const carouselMiddlePos = scrollPos + halfWindowWidth;

          const offsetLefts = [];

          let closestToMiddleDist = 0;
          let closestToMiddleIndex = 0;

          for (let i = 0; i < cards.length; i++) {
            offsetLefts.push(cards[i].offsetLeft);

            const middlePos = offsetLefts[i] + halfCardWidth;
            const distToMiddle = Math.abs(carouselMiddlePos - middlePos);

            if (i === 0 || distToMiddle < closestToMiddleDist) {
              closestToMiddleIndex = i;
              closestToMiddleDist = distToMiddle;
            }
          }

          const getNewOffsetLeft = function (index) {
            return offsetLefts[index] - halfWindowWidth + halfCardWidth;
          };

          if (mode === "left") {
            // already at leftmost and wants to go left
            if (closestToMiddleIndex === 0) return 0;

            // the left card is mostly but not completely showing, so completely show it
            if (offsetLefts[closestToMiddleIndex] < scrollPos) {
              return getNewOffsetLeft(closestToMiddleIndex);
            }

            // Show previous card
            return getNewOffsetLeft(closestToMiddleIndex - 1);
          }

          if (mode === "right") {
            // already at rightmost and wants to go right
            if (closestToMiddleIndex === cards.length - 1) return carouselWidth;

            // the right card is mostly but not completely showing, so completely show it
            if (
              scrollPos + window.innerWidth - halfCardWidth * 2 <
              offsetLefts[closestToMiddleIndex]
            ) {
              return getNewOffsetLeft(closestToMiddleIndex);
            }

            // Show next card
            return getNewOffsetLeft(closestToMiddleIndex + 1);
          }

          return 0;
        };

        // feature detection: scrollTo
        if (!carousel.scrollTo) {
          carousel.scrollTo = function (obj) {
            carousel.scrollLeft = obj.left;
          };
        }

        left.onclick = function () {
          carousel.scrollTo({
            left: newPosition("left"),
            behavior: "smooth",
          });
        };

        right.onclick = function () {
          carousel.scrollTo({
            left: newPosition("right"),
            behavior: "smooth",
          });
        };
      }

      function backgroundClipFeatureDetection() {
        if (document.body.style.webkitBackgroundClip === undefined) {
          document.body.className += "no-background-clip";
        }
      }

      function initUsp() {
        if (!prefersReducedMotion || prefersReducedMotion.matches) return;

        if (typeof IntersectionObserver !== "undefined") {
          const observer = new IntersectionObserver(
            function (entries) {
              entries.forEach(function (entry) {
                entry.target.previousElementSibling.style.opacity = Math.pow(
                  entry.intersectionRatio,
                  8
                );
              });
            },
            {
              threshold: [
                0.5, 0.75, 0.76, 0.77, 0.78, 0.79, 0.8, 0.81, 0.82, 0.83, 0.84, 0.85, 0.86, 0.87,
                0.88, 0.89, 0.9, 0.91, 0.92, 0.93, 0.94, 0.95, 0.96, 0.97, 0.98, 0.99,
              ],
            }
          );

          const intersectionPoints = document.querySelectorAll("#usp .intersection-point");

          for (let i = 0; i < intersectionPoints.length; i++)
            observer.observe(intersectionPoints[i]);
        }
      }

      function initScrollMessage() {
        if (typeof IntersectionObserver !== "undefined") {
          const scrollMsg = document.querySelector(".scroll");

          const observer = new IntersectionObserver(
            function (entries) {
              entries.forEach(function (entry) {
                if (entry.intersectionRatio === 1.0) scrollMsg.style.opacity = "1";
                else scrollMsg.style.opacity = "0";
              });
            },
            {
              threshold: [1.0],
            }
          );

          observer.observe(document.querySelector("header"));
        }
      }

      initBgm();
      initUsp();
      initScrollMessage();
      initCanvas();
      initCarouselScroll();
      backgroundClipFeatureDetection();
    </script>
  </body>
</html>
