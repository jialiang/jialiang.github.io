<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
    <meta name="theme-color" content="#000" />
    <link
      rel="preload"
      href="https://res.cloudinary.com/dedvquoyt/raw/upload/v1633621647/jialiang.github.io/fonts/roboto-v29-latin-regular_nsxhnt.woff2"
      as="font"
      type="font/woff2"
      crossorigin
    />
    <link
      rel="preload"
      href="https://res.cloudinary.com/dedvquoyt/raw/upload/v1633621647/jialiang.github.io/fonts/roboto-v29-latin-500_irlqws.woff2"
      as="font"
      type="font/woff2"
      crossorigin
    />
    <link
      rel="preload"
      href="https://res.cloudinary.com/dedvquoyt/raw/upload/v1633621647/jialiang.github.io/fonts/roboto-v29-latin-700_tmzaa9.woff2"
      as="font"
      type="font/woff2"
      crossorigin
    />

    <title>Jia Liang | Software Engineer</title>
    <meta name="description" content="Personal website of software engineer, Jia Liang" />
    <meta name="author" content="Jia Liang, hojialiang@yahoo.com" />

    <link rel="icon" type="image/x-icon" href="https://jialiang.github.io/favicon.png" />
    <link rel="canonical" href="https://jialiang.github.io/" />

    <style>
      /* roboto-regular - latin */
      @font-face {
        font-family: "Roboto";
        font-weight: 400;
        font-style: normal;

        font-display: swap;
        src: url("https://res.cloudinary.com/dedvquoyt/raw/upload/v1633621647/jialiang.github.io/fonts/roboto-v29-latin-regular_nsxhnt.woff2")
            format("woff2"),
          url("https://res.cloudinary.com/dedvquoyt/raw/upload/v1633621647/jialiang.github.io/fonts/roboto-v29-latin-regular_poclwz.woff")
            format("woff");
      }

      /* roboto-500 - latin */
      @font-face {
        font-family: "Roboto";
        font-weight: 500;
        font-style: normal;

        font-display: swap;
        src: url("https://res.cloudinary.com/dedvquoyt/raw/upload/v1633621647/jialiang.github.io/fonts/roboto-v29-latin-500_irlqws.woff2")
            format("woff2"),
          url("https://res.cloudinary.com/dedvquoyt/raw/upload/v1633621647/jialiang.github.io/fonts/roboto-v29-latin-500_neeaxt.woff")
            format("woff");
      }

      /* roboto-700 - latin */
      @font-face {
        font-family: "Roboto";
        font-weight: 700;
        font-style: normal;

        font-display: swap;
        src: url("https://res.cloudinary.com/dedvquoyt/raw/upload/v1633621647/jialiang.github.io/fonts/roboto-v29-latin-700_tmzaa9.woff2")
            format("woff2"),
          url("https://res.cloudinary.com/dedvquoyt/raw/upload/v1633621647/jialiang.github.io/fonts/roboto-v29-latin-700_nibwrv.woff")
            format("woff");
      }

      /* GENERAL */
      /*#region*/

      html {
        font-family: "Roboto", sans-serif;
        width: 100%;
        height: 100%;
        color: white;
        background: black;
      }

      @media (max-width: 300px) {
        html {
          font-size: 5.325vw;
        }
      }

      body {
        width: 100%;
        height: 100%;
        margin: 0;
      }

      a {
        text-decoration: none;
        color: #2d98fc;
      }

      a:hover {
        text-decoration: underline;
      }

      img {
        width: 100%;
        height: 100%;

        object-fit: cover;
      }

      canvas {
        position: fixed;
        z-index: -1;
        top: 0;
        left: 0;
        box-sizing: border-box;
        width: 100%;
        height: 100vh;
        border-top: 10vh solid black;
        border-bottom: 10vh solid black;

        contain: strict;
      }

      /*#endregion*/

      /* HEADER */
      /*#region*/

      header {
        line-height: 1;
        display: flex;
        align-items: center;
        justify-content: center;
        width: 100%;
        height: 100%;
        text-align: center;
        white-space: nowrap;
      }

      header h1 {
        font-size: 7.5rem;
        font-weight: 500;
        margin: 0;
      }

      header p {
        font-size: 2.5rem;
        font-weight: 400;
        margin: 0.5em 0 0 0;
      }

      @media (max-width: 32.625rem) {
        header h1 {
          font-size: 22vw;
        }

        header p {
          font-size: 7.52vw;
        }
      }

      @media (max-width: 300px), (max-height: 300px) {
        header h1 {
          font-size: 22vmin;
        }

        header p {
          font-size: 7.52vmin;
        }
      }

      /*#endregion*/

      /* BGM */
      /*#region*/

      #bgm-audio {
        display: none;
      }

      #bgm-button {
        font-size: 1rem;
        position: absolute;
        top: 0.85rem;
        right: 0.7rem;
        padding: 0.15rem 0.3rem;
        cursor: pointer;
        color: white;
        border: none;
        background: none;
      }

      #bgm-button:focus {
        outline: 1px solid #2d98fc;
      }

      /*#endregion*/

      /* USP */
      /*#region*/

      #usp {
        font-size: 4.6rem;
        font-weight: bold;
        line-height: 1.1;
        box-sizing: border-box;
        width: 52.5rem;
        max-width: 100%;
        margin: 0 auto 10rem auto;
        padding: 0 0.7rem;
      }

      @media (max-width: 41rem) {
        #usp {
          margin-bottom: 5rem;
        }
      }

      @media (max-width: 30rem) {
        #usp {
          font-size: 15.25vmin;
        }
      }

      #usp ul {
        margin: 0;
        padding: 0;
        list-style: none;
      }

      #usp li {
        position: relative;
        margin-bottom: 3.5rem;
      }

      #usp .text {
        will-change: opacity;
      }

      #usp .intersection-point {
        position: absolute;
        top: 50%;
        width: 1px;
        height: 80vh;
        transform: translateY(-50%);
      }

      /*#endregion*/

      /* PERSONAL */
      /*#region*/

      #personal {
        position: relative;
        display: flex;
        align-items: center;
        width: 52.5rem;
        max-width: 100%;
        min-height: 52.5rem;
        margin: 5rem auto 15rem auto;
      }

      #personal .image-container {
        position: absolute;
        top: 0;
        left: 0;
        overflow: hidden;
        width: 35rem;
        max-width: 100%;
        height: 100%;
        max-height: 52.5rem;
        margin: auto;
        transform: rotate3d(0, 0, 1, -5deg);
        border-radius: 2.5rem;
      }

      #personal .text-container {
        z-index: 1;
        box-sizing: border-box;
        width: 35rem;
        max-width: 100%;
        margin: 0 2rem 0 auto;
        padding: 4rem;
        border-left: 1px solid rgba(255, 200, 2500, 0.2);
        border-radius: 1.5rem;
        background: linear-gradient(
            to right,
            transparent,
            rgba(255, 255, 255, 0.075) 2%,
            transparent 4%
          ),
          radial-gradient(rgba(0, 5, 10, 0.8), black 90%);
      }

      #personal h2 {
        font-size: 2.5rem;
        font-weight: 400;
        line-height: 1.1;
        margin: 0 0 4.5rem 0;
      }

      #personal ul {
        font-size: 2.5rem;
        margin: 0;
        padding: 0;
        list-style: none;
      }

      #personal li {
        margin: 0 0 3.2rem 0;
      }

      #personal .link-container {
        font-weight: 700;
        display: inline-block;
        padding: 0.1rem 0.3rem;
        border-bottom: 3px solid transparent;
        background: linear-gradient(to right, darkorange, deepskyblue);
        -webkit-background-clip: text;
        background-clip: text;

        -webkit-text-fill-color: transparent;
      }

      .no-background-clip #personal .link-container {
        background: transparent;
      }

      #personal .link-container:hover {
        -webkit-text-fill-color: #2d98fc;
      }

      #personal .link-container:focus {
        outline: 1px solid #2d98fc;
      }

      #personal .link-subtext {
        font-size: 0.6em;
        line-height: 1.5;
        padding: 0 0.3rem;
      }

      @media (max-width: 41rem) {
        #personal {
          overflow: hidden;
          min-height: auto;
          margin: 0;
        }

        #personal .text-container {
          width: 100%;
          margin: 0;
          padding: 6rem 0.7rem;
          border-left: none;
          border-radius: 0;
          background: radial-gradient(rgba(0, 5, 10, 0.5), black 90%);
        }
      }

      /*#endregion*/

      /* PROJECTS */
      /*#region*/

      #projects {
        box-sizing: border-box;
        padding: 0 0 15rem 0;
        background: linear-gradient(transparent, rgba(0, 5, 10, 0.5) 10%, black 90%);
      }

      #projects h2 {
        font-size: 2.5rem;
        font-weight: 400;
        line-height: 1.1;
        box-sizing: border-box;
        width: 72rem;
        max-width: 100%;
        margin: 0 auto 4.5rem auto;
        padding: 0 1rem;
      }

      #projects h2 span {
        display: block;
      }

      #projects h2 span:first-child {
        font-size: 1.84em;
        font-weight: 700;
      }

      #projects ul {
        display: flex;
        overflow-y: auto;
        box-sizing: border-box;
        width: 74rem;
        max-width: 100%;
        margin: 0 auto;
        padding: 1.4rem 1.4rem;
        list-style: none;
        transform: translate3d(0, 0, 0);

        scrollbar-width: none;
      }

      #projects ul::-webkit-scrollbar {
        display: none;
      }

      #projects ul:focus {
        outline: 1px solid #2d98fc;
      }

      #projects li {
        position: relative;
        display: inline-block;
        flex-shrink: 0;
        margin-right: 2rem;
        cursor: pointer;
        transition: 0.25s transform;
        transform: perspective(250px) rotateY(5deg);
      }

      @media (prefers-reduced-motion: reduce) {
        #projects li {
          transform: none;
        }
      }

      #projects li::after {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        content: "";
        pointer-events: none;
        background: linear-gradient(
          to right,
          rgba(0, 0, 0, 0.15),
          transparent,
          transparent,
          rgba(0, 0, 0, 0.35)
        );
      }

      #projects li:last-child {
        margin-right: 0;
      }

      #projects li:hover {
        transform: perspective(250px) rotateY(0deg);
        border-bottom-color: #2d98fc;
      }

      #projects a {
        display: block;
        width: 16rem;
        height: 23rem;
        padding: 0.3rem;
        border-radius: 0.75rem;
      }

      #projects a:hover {
        text-decoration: none;
      }

      #projects a:focus {
        outline: 2px solid #2d98fc;
      }

      #projects .image-container {
        overflow: hidden;
        width: 16rem;
        height: 16rem;
        border-top-left-radius: 0.75rem;
        border-top-right-radius: 0.75rem;
      }

      #projects .text-container {
        font-size: 1.35rem;
        font-weight: 500;
        line-height: 1.1;
        display: flex;
        overflow: hidden;
        align-items: center;
        justify-content: center;
        box-sizing: border-box;
        width: 16rem;
        height: 7rem;
        padding: 0.25rem;
        text-align: center;
        color: white;
        border-bottom: 6px solid transparent;
        border-bottom-right-radius: 0.75rem;
        border-bottom-left-radius: 0.75rem;
      }

      #projects .text-container div {
        overflow: hidden;
        padding: 0.75rem 0.5rem;
      }

      #projects a:hover .text-container {
        border-bottom-color: #2d98fc;
      }

      #projects .carousel-button-container {
        display: none;
        justify-content: space-between;
        width: 135rem;
        max-width: 90%;
        margin: 2.5rem auto 0 auto;
      }

      #projects .carousel-button-container button {
        width: 4rem;
        height: 4rem;
        padding: 0;
        cursor: pointer;
        color: white;
        border: none;
        border-radius: 100%;
        background: none;
      }

      #projects .carousel-button-container button:focus {
        outline: 2px solid #2d98fc;
      }

      #projects .carousel-button-container svg {
        width: 100%;
        height: 100%;
      }

      @media (max-width: 40.625rem) {
        #projects {
          background: radial-gradient(rgba(0, 5, 10, 0.5), black 90%);
        }
      }

      @media (max-width: 74.1rem) {
        #projects li:last-child {
          margin-right: 2rem;
        }

        #projects .carousel-button-container {
          display: flex;
        }
      }

      /*#endregion*/

      /* HOW ITS MADE */
      /*#region*/

      #how-its-made {
        position: relative;
        padding: 0 0 15rem 0;
        background: black;
      }

      #how-its-made .observation-point-container {
        position: absolute;
        top: 100vh;
        pointer-events: none;
      }

      #how-its-made .observation-point {
        position: sticky;
        top: 0;
        width: 1px;
        height: 1px;
      }

      #how-its-made .article {
        box-sizing: border-box;
        width: 45rem;
        max-width: 100%;
        margin: auto;
        padding: 0 1rem;
      }

      #how-its-made h2 {
        font-size: 2.5rem;
        font-weight: 400;
        margin: 0 0 4.5rem 0;
      }

      #how-its-made h2 span {
        display: block;
      }

      #how-its-made h2 span:first-child {
        font-size: 1.84em;
        font-weight: 700;
      }

      #how-its-made h3 {
        font-size: 2rem;
        font-weight: 700;
        margin: 2em 0 1em 0;
      }

      #how-its-made h4 {
        font-size: 1.35rem;
        font-weight: 700;
        margin: 2.5em 0 0 0;
      }

      #how-its-made p,
      #how-its-made ul,
      #how-its-made blockquote {
        font-size: 1.25rem;
        line-height: 1.44;
        color: #dbdbdb;
      }

      #how-its-made blockquote {
        margin-right: 0;
        margin-left: 0;
        padding: 1.25rem;
        border-left: 2px solid white;
        background: #151313;
      }

      #how-its-made ol {
        margin: 0;
      }

      /*#endregion*/
    </style>

    <noscript>
      <style>
        #bgm-button {
          display: none !important;
        }

        #projects ul {
          scrollbar-width: initial !important;
        }

        #projects ul::-webkit-scrollbar {
          display: initial !important;
        }

        #projects .carousel-button-container {
          display: none !important;
        }
      </style>
    </noscript>
  </head>
  <body>
    <button id="bgm-button">Play Music</button>

    <canvas aria-hidden="true"></canvas>

    <header>
      <div class="text-container">
        <h1>Jia Liang.</h1>
        <p>Your new software engineer.</p>
      </div>
    </header>

    <section id="usp">
      <ul>
        <li>
          <div class="text">3+ Years Experience.</div>
          <div class="intersection-point"></div>
        </li>
        <li>
          <div class="text">Full-Stack JavaScript.</div>
          <div class="intersection-point"></div>
        </li>
        <li>
          <div class="text">Exceptional Frontend.</div>
          <div class="intersection-point"></div>
        </li>
        <li>
          <div class="text">Information Systems Graduate.</div>
          <div class="intersection-point"></div>
        </li>
      </ul>
    </section>

    <section id="personal">
      <div class="image-container">
        <picture>
          <source
            srcset="
              https://res.cloudinary.com/dedvquoyt/image/upload/v1633621648/jialiang.github.io/images/space_ope70z.webp
            "
            type="image/webp"
          />
          <source
            srcset="
              https://res.cloudinary.com/dedvquoyt/image/upload/v1633621648/jialiang.github.io/images/space_eau5a8.jpg
            "
            type="image/jpeg"
          />
          <img
            src="https://res.cloudinary.com/dedvquoyt/image/upload/v1633621648/jialiang.github.io/images/space_eau5a8.jpg"
            alt=""
          />
        </picture>
      </div>

      <div class="text-container">
        <h2>Reach out and together,<br />we'll reach for the stars.</h2>

        <ul>
          <li>
            <a class="link-container" href="mailto:hojialiang@yahoo.com"
              >hojialiang@<wbr />yahoo.com</a
            >
            <div class="link-subtext">Let's get in touch.</div>
          </li>

          <li>
            <a class="link-container" href="resume.pdf" target="_blank">View my Resume.</a>
            <div class="link-subtext">Learn more about me.</div>
          </li>

          <li>
            <a
              class="link-container"
              href="https://github.com/jialiang"
              target="_blank"
              rel="noreferrer noopener"
              >Visit my GitHub.</a
            >
            <div class="link-subtext">See what I'm currently up to.</div>
          </li>
        </ul>
      </div>
    </section>

    <section id="projects">
      <h2>
        <span>Explore.</span>
        <span>My personal projects.</span>
      </h2>
      <ul id="project-carousel">
        <li>
          <a
            href="https://jialiang.github.io/3D-Engine-For-Miku/"
            target="_blank"
            rel="noreferrer noopener"
          >
            <div class="image-container">
              <picture>
                <source
                  srcset="
                    https://res.cloudinary.com/dedvquoyt/image/upload/v1633621647/jialiang.github.io/images/miku-cover_wksmhp.webp
                  "
                  type="image/webp"
                />
                <source
                  srcset="
                    https://res.cloudinary.com/dedvquoyt/image/upload/v1633621647/jialiang.github.io/images/miku-cover_hen7qs.jpg
                  "
                  type="image/jpeg"
                />
                <img
                  src="https://res.cloudinary.com/dedvquoyt/image/upload/v1633621647/jialiang.github.io/images/miku-cover_hen7qs.jpg"
                  alt="3D Engine For Miku project cover image"
                />
              </picture>
            </div>
            <div class="text-container" style="background: #103c3b">
              <div>3D Engine For Miku</div>
            </div>
          </a>
        </li>
        <li>
          <a
            href="https://jialiang.github.io/space-gems/"
            target="_blank"
            rel="noreferrer noopener"
          >
            <div class="image-container">
              <picture>
                <source
                  srcset="
                    https://res.cloudinary.com/dedvquoyt/image/upload/v1633621648/jialiang.github.io/images/space-gem-cover_ak18tl.webp
                  "
                  type="image/webp"
                />
                <source
                  srcset="
                    https://res.cloudinary.com/dedvquoyt/image/upload/v1633621648/jialiang.github.io/images/space-gem-cover_vmafnz.jpg
                  "
                  type="image/jpeg"
                />
                <img
                  src="https://res.cloudinary.com/dedvquoyt/image/upload/v1633621648/jialiang.github.io/images/space-gem-cover_vmafnz.jpg"
                  alt="Space Gem project cover Image"
                />
              </picture>
            </div>
            <div class="text-container" style="background: #4c2f90">
              <div>Space Gem</div>
            </div>
          </a>
        </li>
        <li>
          <a
            href="https://github.com/jialiang/ShitCompressor"
            target="_blank"
            rel="noreferrer noopener"
          >
            <div class="image-container">
              <picture>
                <source
                  srcset="
                    https://res.cloudinary.com/dedvquoyt/image/upload/v1633621648/jialiang.github.io/images/shit-compressor-cover_vnsgfw.webp
                  "
                  type="image/webp"
                />
                <source
                  srcset="
                    https://res.cloudinary.com/dedvquoyt/image/upload/v1633621648/jialiang.github.io/images/shit-compressor-cover_elcvgz.jpg
                  "
                  type="image/jpeg"
                />
                <img
                  src="https://res.cloudinary.com/dedvquoyt/image/upload/v1633621648/jialiang.github.io/images/shit-compressor-cover_elcvgz.jpg"
                  alt="Shit Compressor project cover image"
                />
              </picture>
            </div>
            <div class="text-container" style="background: #99350a">
              <div>Shit Compressor</div>
            </div>
          </a>
        </li>
        <li>
          <a
            href="https://jialiang.github.io/ygo-ocg-secret-rare/"
            target="_blank"
            rel="noreferrer noopener"
          >
            <div class="image-container">
              <picture>
                <source
                  srcset="
                    https://res.cloudinary.com/dedvquoyt/image/upload/v1633621649/jialiang.github.io/images/yugioh-cover_h75v2d.webp
                  "
                  type="image/webp"
                />
                <source
                  srcset="
                    https://res.cloudinary.com/dedvquoyt/image/upload/v1633621649/jialiang.github.io/images/yugioh-cover_nkd3l7.jpg
                  "
                  type="image/jpeg"
                />
                <img
                  src="https://res.cloudinary.com/dedvquoyt/image/upload/v1633621649/jialiang.github.io/images/yugioh-cover_nkd3l7.jpg"
                  alt="Yu-Gi-Oh Secret Rare Effect with CSS project cover image"
                />
              </picture>
            </div>
            <div class="text-container" style="background: #a9194b">
              <div>Yu-Gi-Oh Secret Rare Effect with CSS</div>
            </div>
          </a>
        </li>
      </ul>
      <div class="carousel-button-container">
        <button id="project-carousel-left-button" aria-label="scroll projects carousel left">
          <svg fill="white" viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg">
            <path
              d="m1037 1395 102-102q19-19 19-45t-19-45L832 896l307-307q19-19 19-45t-19-45l-102-102q-19-19-45-19t-45 19L493 851q-19 19-19 45t19 45l454 454q19 19 45 19t45-19zm627-499q0 209-103 385.5T1281.5 1561 896 1664t-385.5-103T231 1281.5 128 896t103-385.5T510.5 231 896 128t385.5 103T1561 510.5 1664 896z"
            ></path>
          </svg>
        </button>
        <button id="project-carousel-right-button" aria-label="scroll projects carousel right">
          <svg fill="white" viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg">
            <path
              d="m845 1395 454-454q19-19 19-45t-19-45L845 397q-19-19-45-19t-45 19L653 499q-19 19-19 45t19 45l307 307-307 307q-19 19-19 45t19 45l102 102q19 19 45 19t45-19zm819-499q0 209-103 385.5T1281.5 1561 896 1664t-385.5-103T231 1281.5 128 896t103-385.5T510.5 231 896 128t385.5 103T1561 510.5 1664 896z"
            ></path>
          </svg>
        </button>
      </div>
    </section>

    <section id="how-its-made">
      <div class="observation-point-container">
        <div class="observation-point"></div>
      </div>

      <div class="article">
        <h2>
          <span>How.</span>
          <span>The making of this website.</span>
        </h2>

        <p>
          It's that time of the year again where I revamp my personal website. The one you're
          looking at right now is the 4th edition. I reckon the entire development lifecycle of this
          website took me 7 man-days. I'd say I spent most of that time improving accessibility and
          writing this document.
        </p>

        <p>
          This time around, I studied the
          <a href="https://www.apple.com/" target="_blank" rel="noopener noreferrer"
            >Apple website</a
          >
          for design ideas. I've always considered Apple's marketing materials to be well done even
          if I don't always agree with their business practices.
        </p>

        <h3>Hosting</h3>

        <p>
          The HTML and static media files are hosted on
          <a href="https://pages.github.com/" target="_blank" rel="noopener noreferrer"
            >GitHub Pages</a
          >. Most of my repositories are already hosted on GitHub so I'm using them out of
          convenience. They use Fastly as their CDN.
        </p>
        <p>
          However, I use
          <a href="https://cloudinary.com/" target="_blank" rel="noopener noreferrer">Cloudinary</a>
          to host all other static assets. Cloudinary uses a multi-CDN approach with 3 CDNs: Akamai,
          Cloudfront and Fastly. I discover them when I was prodding through the internals of
          <a href="https://www.nike.com">Nike's website</a>.
        </p>
        <p>
          The main reason I use Cloudinary is because GitHub Pages sets a 10 minute cache-control
          header on all resources. Despite being a widely requested feature, they refuse to allow us
          to set a longer cache expiry period. By contrast, Cloudinary has a reasonable 10 minute
          cache-control period. Caching greatly reduces the latency of future file requests. It
          allows browsers to make use of their local copy of the file. This is way faster than
          retrieving the file again from the server.
        </p>
        <p>
          Caching aside, on my home internet, Cloudinary delivers files around 60% faster than
          GitHub Pages. I tested this by first opening a new incognito browser window. Then I track
          the time it takes for them to transfer a 15kB payload. Do note that even if you enable
          "disable cache" in the developer console, browsers may still keep connections alive and
          cache DNS lookups. Therefore a new incognito window is necessary for a truly clean slate.
          I repeat this multiple times and average the results.
        </p>
        <p>
          But don't just take my word for it, according to CDNPerf, in Asia where I'm based:
          <a
            href="https://www.cdnperf.com/cdn-compare?type=performance&location=continents&cdn=akamai-cdn,aws-cloudfront-cdn,cloudflare-cdn,fastly-cdn&locationValue=Asia"
            target="_blank"
            rel="noopener noreferrer"
            >Fastly is consistently slower than its competitors</a
          >.
        </p>
        <p>
          I am aware using a seperate host for static assets does have its drawbacks. For one, that
          the browser needs to perform an additional DNS lookup, initial connection and SSL
          handshake after parsing the HTML. However, even with these overhead, Cloudinary still
          manages to match or beat GitHub Pages' time. It should be said that Cloudinary cannot be
          used to host websites. They will serve HTML files as attachments rather than webpages.
        </p>
        <p>
          Audio files are still served through GitHub Pages because latency is less of an issue for
          large media content. Cloudinary also has a strict 33GB per month free bandwidth limit.
        </p>

        <h3>Header</h3>

        <p>
          I like how the header is done on the
          <a href="https://www.apple.com/macbook-pro-16/" target="_blank" rel="noopener noreferrer"
            >product page for the MacBook Pro 16-inch</a
          >. It starts with this big headline and tagline. The big bold letters stand in stark
          contrast to the simple background. Without any other elements around it, your attention is
          immediately drawn to it. From there, the headline sets the context and the tagline sets
          the tone and expectation. The boldness of the font and the use of periods creates an air
          of confidence.
        </p>

        <p>
          Apple also includes a product image near the header text to illustrate the product sold. I
          considered putting a picture of myself, but I wasn't able to produce any that were good
          enough. I figure generative art can be a good alternative. It provides visual interest but
          more importantly sends a message of technical competence.
        </p>

        <h3>Background</h3>

        <p>
          Around this time, I was marathoning through all 5 seasons of Rick and Morty and got hooked
          on one of the songs called "Goodbye Moonmen". I later found a
          <a
            aria-label="Goodbye Moonmen remix by The Living Tombstone"
            href="https://www.youtube.com/watch?v=vdEWZq-m27M"
            target="_blank"
            rel="noopener noreferrer"
            >remix by The Living Tombstone</a
          >. Not only did that become my favorite version, it has a music video which looked cool
          and doable with WebGL. That's how I got the idea for the star field background.
        </p>

        <p>
          To start, I looked if someone had done something visually similar. After all, why reinvent
          the wheel from scratch when you could improve upon someone else's octagon instead. That's
          when I found
          <a href="https://www.shadertoy.com/view/Xdl3D2" target="_blank" rel="noopener noreferrer"
            >Hazel Quantock's Interstellar</a
          >, distributed under the
          <a
            href="https://creativecommons.org/publicdomain/zero/1.0/"
            target="_blank"
            rel="noopener noreferrer"
            >CC0 license</a
          >. After a bit of customization and some optimizations later, it became the star field you
          see on this webpage. This also forms the basis for the Space theme of the website.
        </p>

        <p>
          One of the more complex optimizations I made is using
          <a
            href="https://developer.mozilla.org/en-US/docs/Web/API/OffscreenCanvas"
            target="_blank"
            rel="noopener noreferrer"
            >OffscreenCanvas</a
          >
          and
          <a
            href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API"
            target="_blank"
            rel="noopener noreferrer"
            >Web Workers</a
          >. WebGL animation can be very CPU intensive especially during initialization. If done on
          the main thread, it can block the execution of other tasks. This makes the user interface
          unresponsive. In order to make it non-blocking, a Web Worker is spawned to execute code on
          a separate thread. Web Workers do not have access to the DOM, so it cannot draw to the DOM
          canvas directly. Thus OffscreenCanvas is needed as a go-between. Browsers that do not
          support either features will fall back to using the main thread. The way I measure
          improvements from this change is the time to interactive metric in
          <a
            href="https://developers.google.com/web/tools/lighthouse"
            target="_blank"
            rel="noopener noreferrer"
            >Lighthouse</a
          >.
        </p>

        <p>
          I'm proud to say that even on a Xiaomi Redmi Note 4, it runs at 55-60 fps on both Firefox
          Mobile and Chrome for Android. For context, the Xiaomi Redmi Note 4 is a 170 USD mid-range
          phone released in early 2017.
        </p>

        <p>User experience-wise, I'm quite pleased with how the star field turned out.</p>

        <ul>
          <li>
            The constant motion makes the webpage feel alive and dynamic, yet doesn't distract from
            the content. The motion's rhythmic nature allows the brain to become habituated to it.
          </li>
          <li>It's something fresh and not something you often see on the web.</li>
          <li>It's light on bandwidth since everything is procedurally generated by code.</li>
          <li>
            It uses a reasonable amount of GPU. For a 1080p 60Hz screen, it uses around 50% of an
            Intel UHD Graphics 630 GPU.
          </li>
        </ul>

        <h3>Intro Section</h3>

        <p>
          I decided to list down my value propositions right after the header. You know, to tickle
          the reader's balls a bit. My method was inspired by the
          <a
            href="https://www.apple.com/my/iphone-13-pro/"
            target="_blank"
            rel="noopener noreferrer"
            >iPhone 13 Pro product page</a
          >. Most people don't like reading so I made my messages as short as possible. I made them
          big and bold so that they're hard to miss. The fade-on-scroll effect makes it interactive.
          This way users are more likely to slow down, play with it and read everything.
        </p>

        <h3>Personal Section</h3>

        <p>
          I decided to follow the way Apple presents key numbers and facts on the
          <a href="https://www.apple.com/ipad-pro/" target="_blank" rel="noopener noreferrer"
            >iPad Pro product page</a
          >. Those big bold neon-like gradient-colored texts over a black were really eye-catching.
          The visual hierarchy made information easy to skim and pick up.
        </p>

        <p>
          Apple themselves use a canvas-based approach to create the gradient text. But this method
          prevents text from wrapping. The same effect can be achieved in CSS using background-clip
          and text-fill-color. While these properties are non-standard,
          <a
            href="https://caniuse.com/background-clip-text"
            target="_blank"
            rel="noopener noreferrer"
            >97% of users support background-clip</a
          >
          and
          <a
            href="https://caniuse.com/mdn-css_properties_-webkit-text-fill-color"
            target="_blank"
            rel="noopener noreferrer"
            >95% of users support text-fill-color</a
          >. With that said, I use feature detection and fallback to solid colors on browsers that
          don't support them.
        </p>

        <p>
          I also added an image near the text box to further break up the monotony with more color.
          I wanted both elements to feel cohesive and fit with the Space theme. So I made it look
          like a scene where you received a postcard along with an invitation on a datapad.
        </p>

        <p>
          The
          <a
            href="https://pixabay.com/illustrations/earth-space-sunlight-sun-rays-1756274/"
            target="_blank"
            rel="noopener noreferrer"
            >sunrise over Earth image</a
          >
          was created by Arek Socha. It is distributed under the
          <a href="https://pixabay.com/service/license/" target="_blank" rel="noopener noreferrer"
            >Pixabay license</a
          >. I cropped it to be vertical, overexposed it to make the sunlight more intense and added
          some white noise to give it a textured look. I added a slight shine to the text box to
          give it depth and make it seem glossy.
        </p>

        <p>
          I think just having my GitHub profile, resume and email is enough. I do have a LinkedIn,
          but I'm not active on it. Some people also give a professional summary or details of their
          life in this section. For the former, it's just rehashing their resume in a wordier less
          intuitive way. For the latter, most people just aren't interested unless you're someone
          noteworthy or happened to mention something the reader is really enthusiastic about.
        </p>

        <h3>Projects Section</h3>

        <p>
          I envisioned my personal projects shown the same way apps show a list of song cover art.
          So I looked at Apple Music's user interface for inspiration. I did find the card-based
          approach to be reasonable. I also liked how the background uses the dominant color of the
          cover art to group text and image visually.
        </p>

        <p>
          I did the same, but while the results weren't bad, it does feel a tad generic. Then I
          thought of how vinyl and CDs are arranged on shelves and tried rotating the cards
          horizontally a bit. Boy, did that make a huge difference. Things suddenly looked way more
          interesting. I'm not entirely sure why this is the case but I read that it's due to visual
          tension. Basically, we filter out the routine and mundane. But when things look off, we
          pay attention to it.
        </p>

        <p>
          The cards all need to be in a single row. They shouldn't wrap so as not to interrupt the
          compositional flow. Thus, horizontal overflow would occur on smaller screens. Most mouse
          users don't really have a way to scroll horizontally. They would need to depend on
          on-screen arrows, which can be tedious to use. But I decided it wasn't a big problem. I
          only have 4 projects at the time of writing. Mouse users tend to have larger screens. All
          the projects should fit with little to no scrolling required from them.
        </p>

        <p>
          For a while, I considered adding scroll snapping. Think of it like auto-correct for
          scrolling. It was easy to implement too now that CSS natively supports it. But I looked at
          what people said on the internet and most aren't big fans. They claim it's invasive, takes
          control away from the user and goes against user expectations. I looked at the
          <a href="https://www.apple.com/store" target="_blank" rel="noopener noreferrer"
            >Apple Store page</a
          >
          and the
          <a
            href="https://developers.google.com/search/docs/advanced/structured-data/carousel"
            target="_blank"
            rel="noopener noreferrer"
            >Google Search Carousel</a
          >
          and they don't have scroll snapping either. Thus, I decided to scrap this idea.
        </p>

        <h3>How It's Made Section</h3>

        <p>
          For this section I made the background black instead of semi-transparent like the others.
          This way you can focus better on the text. The background animation is also turned off
          since it won't be visible anymore. I achieved this using the
          <a
            href="https://developer.mozilla.org/en-US/docs/Web/API/Intersection_Observer_API"
            target="_blank"
            rel="noopener noreferrer"
            >Intersection Observer API</a
          >. The body text is also made off-white to reduce eye-strain.
        </p>

        <p>
          I typed this article on
          <a href="https://docs.google.com" target="_blank" rel="noopener noreferrer"
            >Google Docs</a
          >
          and used its spell checker and grammar checker. I also use the
          <a href="https://hemingwayapp.com/" target="_blank" rel="noopener noreferrer"
            >Hemingway App</a
          >
          to ensure good writing style and readability. It uses the Automated Readability Index
          (ARI) to gauge my readability level. It gave my article a Grade 7, which means it's around
          the level of Harry Potter in terms of readability.
        </p>

        <h3>Accessibility</h3>

        <p>
          On accessibility, I refer to the
          <a href="https://www.w3.org/TR/WCAG21/" target="_blank" rel="noopener noreferrer"
            >Web Content Accessibility Guidelines (WCAG) 2.1 standard</a
          >. Here I'll discuss some of the Level AAA success criteria relevant to my website.
        </p>

        <h4>Success Criterion 1.4.6: Contrast (Enhanced)</h4>

        <p>
          Probably the most famous criterion. A website must have a sufficient color contrast ratio
          for all texts: 7:1 for normal texts and 4.5:1 for large texts. The lowest color contrast
          ratio on this webpage is 7.07:1 on text links.
        </p>

        <h4>Success Criterion 1.4.8: Visual Presentation</h4>

        <p>This success criterion has 5 requirements:</p>

        <blockquote>
          <ol>
            <li>Foreground and background colors can be selected by the user.</li>
          </ol>
        </blockquote>

        <p>
          At first glance, the first criteria seems to significantly restrict your creative freedom,
          but I later found out that that was not the case.
        </p>

        <p>
          For context, browsers that meet
          <a
            href="https://www.w3.org/TR/UAAG10/guidelines.html#tech-configure-text-color"
            target="_blank"
            rel="noopener noreferrer"
            >User Agent Accessibility Guidelines 1.0 (UAAG 1.0) Checkpoint 4.3</a
          >
          allow users to configure the background and foreground colors. They can also be set to
          override the webpage's stylesheet.
        </p>

        <p>
          One way to satisfy this requirement is using
          <a
            href="https://www.w3.org/WAI/WCAG21/Techniques/general/G156.html"
            target="_blank"
            rel="noopener noreferrer"
            >Technique G156: Using a technology that has commonly-available user agents that can
            change the foreground and background of blocks of text</a
          >. It asks that you don't unnecessarily prevent your stylesheets from being overridden.
          For context, there are CSS properties like
          <a
            href="https://developer.mozilla.org/en-US/docs/Web/CSS/forced-color-adjust"
            target="_blank"
            rel="noopener noreferrer"
            >forced-color-adjust and -ms-high-contrast-adjust</a
          >. They allow elements to be opt-out from being overridden if their original colors serve
          a functional purpose.
        </p>

        <br />

        <blockquote>
          <ol start="2">
            <li>Width is no more than 80 characters or glyphs (40 if CJK).</li>
            <li>Text is not justified (aligned to both the left and the right margins).</li>
            <li>
              Line spacing (leading) is at least space-and-a-half within paragraphs, and paragraph
              spacing is at least 1.5 times larger than the line spacing.
            </li>
          </ol>
        </blockquote>

        <p>The next 3 requirements are quite straightforward:</p>

        <ul>
          <li>The width of my text blocks are around 70 characters.</li>
          <li>None of my texts are justified.</li>
          <li>My paragraph spacing is 2.27 times larger than my line spacing.</li>
        </ul>
        <br />

        <blockquote>
          <ol start="5">
            <li>
              Text can be resized without assistive technology up to 200 percent in a way that does
              not require the user to scroll horizontally to read a line of text on a full-screen
              window.
            </li>
          </ol>
        </blockquote>

        <p>
          The fifth requirement was a bit confusing. After all, given a small enough screen size,
          all websites eventually fail to allow doubling of text size without breaking. I did find
          out that this requirement is related to
          <a
            href="https://www.w3.org/WAI/WCAG21/Understanding/reflow.html"
            target="_blank"
            rel="noopener noreferrer"
            >Success Criterion 1.4.10: Reflow</a
          >. Combining both criteria, I concluded that given a viewport of 1280×1024 CSS pixels,
          users must be able to zoom up to 400%. During which, 200% text enlargement must be
          possible.
        </p>

        <h4>Success Criterion 2.1.3: Keyboard (No Exception)</h4>

        <p>
          To satisfy this criteria, I tried navigating my website using only a keyboard. I also made
          sure that the currently focused element is always visible and clearly distinguishable.
          Focused elements on this website always have a blue outline.
        </p>

        <h4>Success Criterion 2.3.3: Animation from Interactions</h4>

        <p>
          Animations can cause dizziness or nausea in people with vestibular disorders. I use the
          "prefers-reduced-motion" CSS Media Query to understand the user's motion preference. All
          animations are disabled if the user prefers reduced motion.
        </p>

        <h4>Success Criterion 2.4.9: Link Purpose (Link Only)</h4>

        <p>
          Some vision-impaired users use their screen reader's "list of links" function for quick
          navigation. I used the NVDA screen reader to make sure that the list of links for my
          website makes sense even without context.
        </p>

        <h4>Success Criterion 2.4.10: Section Headings</h4>

        <p>
          Section headings allow for easy navigation and better reading comprehension. I went into
          the Accessibility tab in the Firefox Developer Tools and checked that the outline of the
          document makes sense.
        </p>

        <h4>Success Criterion 3.1.5: Reading Level</h4>

        <p>
          This is to accommodate people with lower secondary education level reading ability. I used
          the Hemingway App to determine the readability level of my texts and adjust accordingly.
        </p>

        <h3>Compatibility</h3>

        <p>
          This website should work with the latest version of all major browsers. At the time of
          writing these are:
        </p>

        <ul>
          <li>Mozilla Firefox 92</li>
          <li>Google Chrome 94</li>
          <li>Microsoft Edge 94</li>
          <li>Apple Safari 15</li>
        </ul>

        <p>
          On Internet Explorer 11 and on browsers with JavaScript disabled, graceful degradation
          occurs. All text and links would still show up and work but some features may be
          unavailable.
        </p>

        <p>
          I've tested this webpage on a wide range of simulated screen sizes. The 2 main ways I test
          for screen size compatibility are as follows:
        </p>

        <ul>
          <li>
            I start with a 240×320 viewport (Nokia 8110 4G). First I stretch it horizontally until
            it has a 32:9 aspect ratio (Double Full HD). Then I start over and stretch it vertically
            until it has a 9:32 aspect ratio. This test covers extreme aspect-ratios combined with
            extremely small sides.
          </li>
          <li>
            I simulate the viewport sizes of iPhone, iPad and a 1080p monitor. This test covers
            widely-used screen sizes.
          </li>
        </ul>

        <h3>Images</h3>

        <p>My workflow for handling images are as follows:</p>

        <ul>
          <li>
            I make sure to source my images straight from the horse's mouth. You don't know how many
            compression cycles an image on a random website has gone through. It also helps to know
            who the original author is so proper credit can be given.
          </li>
          <li>
            If lossy compression is needed for final delivery, I use my own tool, Shit Compressor,
            to generate the JPG and WebP files. I strike a balance between size and quality by
            aiming for a DSSIM score as close to 0.01 as possible on the output image. DSSIM is a
            metric for measuring perceived similarity between 2 images. A score of 0.01 and below
            considers distortion to be imperceptible.
          </li>
        </ul>

        <h3>Privacy</h3>

        <p>As always, this webpage contains absolutely no tracking whatsoever.</p>
      </div>
    </section>

    <audio id="bgm-audio">
      <source src="audios/GoodbyeMoonmen.flac" type="audio/flac" />
      <source src="audios/GoodbyeMoonmen.mp3" type="audio/mp3" />
    </audio>

    <script id="vertex-shader-source" type="x-shader/x-vertex">
      attribute vec3 a_Position;

      void main(void) {
        gl_Position = vec4(a_Position, 1.0);
      }
    </script>

    <script id="fragment-shader-source" type="x-shader/x-fragment">
      precision mediump float;

      uniform vec2 iResolution;
      uniform float iTime;

      uniform sampler2D iChannel0;

      vec4 noise(in ivec2 x) {
          return texture2D(iChannel0, (vec2(x) + 0.5) / 256.0);
      }

      vec3 supernova(vec2 fragCoord) {
          float baseIntensity = abs(sin(1.0 - abs(fragCoord.x * fragCoord.y) + iTime * 0.5));
          float poweredIntesity = max(pow(baseIntensity * 2.0, 4.0) - 14.0, 0.0);

          return vec3(
            0.0,
            poweredIntesity / 3.0,
            poweredIntesity / 2.0
          );
      }

      vec3 starfield(vec2 fragCoord) {
          vec3 ray = vec3(fragCoord, 1.0);

          float offset = iTime;
          float speed_2 = 2.5;
          float speed = speed_2 + 0.5;

          vec3 fragColor = vec3(0.0);

          vec3 stp = ray / max(abs(ray.x), abs(ray.y));

          vec3 pos = 2.0 * stp + 0.5;

          for (int i = 0; i < 3; i++) {
              float z = fract(noise(ivec2(pos.xy)).x - offset);
              float d = 25.0 * z - pos.z;
              float width = pow(max(0.0, 1.0 - 8.0 * length(fract(pos.xy) - 0.5)), 2.0);

              vec3 color = vec3(
                1.0 - abs(d + speed_2 * 0.5) / speed / 2.0,
                1.0 - abs(d + sin(iTime * 0.75)) / speed,
                1.0 - abs(d - speed_2 * 0.5) / speed
              );
              color = max(vec3(0.0), color);

              fragColor += 1.5 * (1.0 - z) * color * width;
              pos += stp;
          }

          return fragColor;
      }

      void main() {
          vec2 fragCoord = 2.0 * (gl_FragCoord.xy - iResolution.xy * 0.5) / iResolution.x;

          gl_FragColor = vec4(starfield(fragCoord), 1.0) + vec4(supernova(fragCoord), 1.0) * 0.1;
      }
    </script>

    <script id="webgl-code">
      let gl;

      let iResolutionLoc;
      let iTimeLoc = null;

      function initWebGL(canvas, vertexShaderSource, fragmentShaderSource) {
        const glOptions = { alpha: false, antialias: false };

        gl = canvas.getContext("webgl", glOptions);

        if (!gl) gl = canvas.getContext("experimental-webgl", glOptions);

        if (!gl) return;

        gl.viewport(0, 0, canvas.width, canvas.height);

        // Shaders and Program

        const vertexShader = gl.createShader(gl.VERTEX_SHADER);
        const fragmentShader = gl.createShader(gl.FRAGMENT_SHADER);

        gl.shaderSource(vertexShader, vertexShaderSource);
        gl.shaderSource(fragmentShader, fragmentShaderSource);

        gl.compileShader(vertexShader);
        gl.compileShader(fragmentShader);

        const program = gl.createProgram();

        gl.attachShader(program, vertexShader);
        gl.attachShader(program, fragmentShader);
        gl.linkProgram(program);
        gl.useProgram(program);

        // Position buffer

        const positionBuffer = gl.createBuffer();

        gl.bindBuffer(gl.ARRAY_BUFFER, positionBuffer);
        gl.bufferData(
          gl.ARRAY_BUFFER,
          // prettier-ignore
          new Float32Array([
             1,  1, 0,
            -1,  1, 0,
             1, -1, 0,
            -1, -1, 0
          ]),
          gl.STATIC_DRAW
        );
        gl.enableVertexAttribArray(0);
        gl.vertexAttribPointer(0, 3, gl.FLOAT, false, 0, 0);

        // Uniforms

        iResolutionLoc = gl.getUniformLocation(program, "iResolution");
        iTimeLoc = gl.getUniformLocation(program, "iTime");

        gl.uniform2fv(iResolutionLoc, [canvas.width, canvas.height]);
        gl.uniform1f(iTimeLoc, 0);

        // Textures

        let noiseImage;

        if (typeof document !== "undefined") {
          noiseImage = document.createElement("canvas");
          noiseImage.width = 256;
          noiseImage.height = 256;
        } else {
          noiseImage = new OffscreenCanvas(256, 256);
        }

        const context = noiseImage.getContext("2d");

        const imageData = context.getImageData(0, 0, 256, 256);
        const pixels = imageData.data;

        for (let i = 0; i < pixels.length; i += 4) {
          pixels[i] = Math.random() * 256;
          pixels[i + 3] = 255;
        }

        context.putImageData(imageData, 0, 0);

        const texture = gl.createTexture();
        const iChannel0Loc = gl.getUniformLocation(program, "iChannel0");

        gl.activeTexture(gl.TEXTURE0);
        gl.bindTexture(gl.TEXTURE_2D, texture);
        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, noiseImage);
        gl.generateMipmap(gl.TEXTURE_2D);
        gl.uniform1i(iChannel0Loc, 0);
      }

      function renderWebGL(totalTime) {
        gl.uniform1f(iTimeLoc, (totalTime % 10000) / 1000);
        gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);
      }

      onmessage = function (e) {
        if (e.data.raf) return renderWebGL(e.data.raf);

        return initWebGL(e.data.canvas, e.data.vertexShaderSource, e.data.fragmentShaderSource);
      };
    </script>

    <script>
      const prefersReducedMotion = window.matchMedia("(prefers-reduced-motion: reduce)");

      function initBgm() {
        const bgmAudio = document.getElementById("bgm-audio");
        const bgmButton = document.getElementById("bgm-button");

        const playingText = "Pause Music";
        const pausedText = "Play Music";

        bgmAudio.onended = function () {
          bgmButton.textContent = pausedText;
        };

        bgmButton.onclick = function () {
          if (bgmAudio.paused) {
            bgmAudio.play();
            bgmButton.textContent = playingText;
          } else {
            bgmAudio.pause();
            bgmButton.textContent = pausedText;
          }
        };
      }

      function initCanvas() {
        if (!prefersReducedMotion || prefersReducedMotion.matches) return;

        let pause = false; // pause by user scrolled to how-its-made section

        if (typeof IntersectionObserver !== "undefined") {
          const observer = new IntersectionObserver(
            function (entries) {
              if (entries[0].isIntersecting) pause = true;
              else pause = false;
            },
            { threshold: [1] }
          );

          observer.observe(document.querySelector("#how-its-made .observation-point"));
        }

        const canvas = document.getElementsByTagName("canvas")[0];
        const vertexShaderSource = document.getElementById("vertex-shader-source").innerHTML;
        const fragmentShaderSource = document.getElementById("fragment-shader-source").innerHTML;

        const width = window.innerWidth * devicePixelRatio;
        const height = window.innerHeight * 0.8 * devicePixelRatio;

        if (canvas.transferControlToOffscreen) {
          // We support off-screen canvas!

          const workerCode = document.getElementById("webgl-code").innerHTML;
          const workerCodeBlob = new Blob([workerCode], { type: "text/javascript" });
          const offscreenCanvas = canvas.transferControlToOffscreen();

          offscreenCanvas.width = width;
          offscreenCanvas.height = height;

          const worker = new Worker(window.URL.createObjectURL(workerCodeBlob));

          worker.postMessage(
            {
              canvas: offscreenCanvas,
              vertexShaderSource: vertexShaderSource,
              fragmentShaderSource: fragmentShaderSource,
            },
            [offscreenCanvas]
          );

          const draw = function (totalTime) {
            if (!pause) worker.postMessage({ raf: totalTime });

            requestAnimationFrame(draw);
          };

          requestAnimationFrame(draw);
        } else {
          // We don't support offscreen canvas, use normal way

          canvas.width = width;
          canvas.height = height;

          initWebGL(canvas, vertexShaderSource, fragmentShaderSource);

          const draw = function (totalTime) {
            if (!pause) renderWebGL(totalTime);

            requestAnimationFrame(draw);
          };

          requestAnimationFrame(draw);
        }
      }

      function initCarouselScroll() {
        const carousel = document.getElementById("project-carousel");
        const cards = document.querySelectorAll("#project-carousel li");
        const left = document.getElementById("project-carousel-left-button");
        const right = document.getElementById("project-carousel-right-button");

        const newPosition = function (mode) {
          if (carousel.scrollWidth < innerWidth) return 0;

          const scrollPos = carousel.scrollLeft;
          const carouselWidth = carousel.scrollWidth;
          const halfCardWidth = (8 * carouselWidth) / 74;
          const halfWindowWidth = innerWidth / 2;
          const carouselMiddlePos = scrollPos + halfWindowWidth;

          const offsetLefts = [];

          let closestToMiddleDist = 0;
          let closestToMiddleIndex = 0;

          for (let i = 0; i < cards.length; i++) {
            offsetLefts.push(cards[i].offsetLeft);

            const middlePos = offsetLefts[i] + halfCardWidth;
            const distToMiddle = Math.abs(carouselMiddlePos - middlePos);

            if (i === 0 || distToMiddle < closestToMiddleDist) {
              closestToMiddleIndex = i;
              closestToMiddleDist = distToMiddle;
            }
          }

          const getNewOffsetLeft = function (index) {
            return offsetLefts[index] - halfWindowWidth + halfCardWidth;
          };

          if (mode === "left") {
            // already at leftmost and wants to go left
            if (closestToMiddleIndex === 0) return 0;

            // the left card is mostly but not completely showing, so completely show it
            if (offsetLefts[closestToMiddleIndex] < scrollPos) {
              return getNewOffsetLeft(closestToMiddleIndex);
            }

            // Show previous card
            return getNewOffsetLeft(closestToMiddleIndex - 1);
          }

          if (mode === "right") {
            // already at rightmost and wants to go right
            if (closestToMiddleIndex === cards.length - 1) return carouselWidth;

            // the right card is mostly but not completely showing, so completely show it
            if (scrollPos + innerWidth - halfCardWidth * 2 < offsetLefts[closestToMiddleIndex]) {
              return getNewOffsetLeft(closestToMiddleIndex);
            }

            // Show next card
            return getNewOffsetLeft(closestToMiddleIndex + 1);
          }

          return 0;
        };

        // feature detection: scrollTo
        if (!carousel.scrollTo) {
          carousel.scrollTo = function (obj) {
            carousel.scrollLeft = obj.left;
          };
        }

        left.onclick = function () {
          carousel.scrollTo({
            left: newPosition("left"),
            behavior: "smooth",
          });
        };

        right.onclick = function () {
          carousel.scrollTo({
            left: newPosition("right"),
            behavior: "smooth",
          });
        };
      }

      function backgroundClipFeatureDetection() {
        if (document.body.style.webkitBackgroundClip === undefined) {
          document.body.className += "no-background-clip";
        }
      }

      function initUsp() {
        if (!prefersReducedMotion || prefersReducedMotion.matches) return;

        if (typeof IntersectionObserver !== "undefined") {
          const observer = new IntersectionObserver(
            function (entries) {
              entries.forEach(function (entry) {
                entry.target.previousElementSibling.style.opacity = Math.pow(
                  entry.intersectionRatio,
                  6
                );
              });
            },
            {
              threshold: [0.5, 0.55, 0.6, 0.65, 0.7, 0.75, 0.8, 0.85, 0.9, 0.95, 1.0],
            }
          );

          const intersectionPoints = document.querySelectorAll("#usp .intersection-point");

          for (let i = 0; i < intersectionPoints.length; i++)
            observer.observe(intersectionPoints[i]);
        }
      }

      initBgm();
      initUsp();
      initCanvas();
      initCarouselScroll();
      backgroundClipFeatureDetection();
    </script>
  </body>
</html>
